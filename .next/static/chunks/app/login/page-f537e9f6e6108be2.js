(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{76912:function(e,t,n){Promise.resolve().then(n.bind(n,66374))},66374:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(57437),o=n(2265),l=n(83464),s=n(99376),a=n(89374),i=n(95186),d=n(27648),u=n(84286);function c(){var e;let t=(0,s.useRouter)(),n=null!==(e=(0,s.useSearchParams)().get("redirect"))&&void 0!==e?e:"/dashboard",[c,f]=(0,o.useState)(""),[p,m]=(0,o.useState)(""),[g,h]=(0,o.useState)(null),[x,v]=(0,o.useState)(!1),[b,y]=(0,o.useState)(!1),[j,N]=(0,o.useState)(null),w=async e=>{e.preventDefault(),h(null),v(!0);try{let e=await l.Z.post("/api/auth/login",{username:c,password:p},{withCredentials:!0});e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("role",e.data.role),localStorage.setItem("username",e.data.username)),t.push(n),t.refresh()}catch(t){var r,o,s,a,i,d,u;let e=null!==(u=null!==(d=null==t?void 0:null===(o=t.response)||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.message)&&void 0!==d?d:null==t?void 0:t.message)&&void 0!==u?u:"Login failed.";(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.status)===401?e="Invalid username or password. If this is your first time, click 'Seed DB' to create the demo account.":(null==t?void 0:null===(a=t.response)||void 0===a?void 0:a.status)===0||(null==t?void 0:t.code)==="ERR_NETWORK"?e="Cannot connect to server. Make sure the development server is running.":(null==t?void 0:null===(i=t.response)||void 0===i?void 0:i.status)&&t.response.status>=500&&(e="Server error. Check your MongoDB connection and try seeding the database."),h(e),console.error("Login error:",t)}finally{v(!1)}},S=async()=>{var e,t,n,r;N(null),y(!0);try{let t=await l.Z.post("/api/auth/seed"),n=(null===(e=t.data)||void 0===e?void 0:e.message)||"Database seeded successfully!";N("✅ ".concat(n," You can now login with superadmin/admin123")),f("superadmin"),m("admin123"),h(null)}catch(l){let e=null==l?void 0:null===(t=l.response)||void 0===t?void 0:t.data,o="Failed to seed database.";(null==e?void 0:e.hint)?(o="".concat(e.error||o,"\n\n\uD83D\uDCA1 ").concat(e.hint),((null===(n=e.error)||void 0===n?void 0:n.includes("MongoDB"))||(null===(r=e.error)||void 0===r?void 0:r.includes("connection")))&&(o+="\n\n\uD83D\uDCDD Setup Instructions:\n1. Create a .env.local file in the project root\n2. Add MONGODB_URI with your MongoDB connection string\n3. See SETUP_ENV.md for detailed instructions")):(null==e?void 0:e.message)?o=e.message:(null==l?void 0:l.code)==="ERR_NETWORK"&&(o="Cannot connect to server. Make sure the development server is running (npm run dev)."),N("❌ ".concat(o))}finally{y(!1)}};return(0,r.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center bg-[radial-gradient(circle_at_top,_#1C274A,_transparent_60%)] px-6",children:(0,r.jsxs)("div",{className:"w-full max-w-md space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-2xl border border-gold/30 bg-[#111b33]/80 p-6 backdrop-blur",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"rounded-full bg-gold/20 p-3 text-gold",children:(0,r.jsx)(u.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gold",children:"Smart Police Analytics"}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"Demo credentials available below"})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-gold/20 bg-gold/10 p-4 text-sm text-slate-200 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gold mb-2",children:"Demo Account"}),(0,r.jsxs)("p",{children:["Username: ",(0,r.jsx)("span",{className:"font-mono text-gold",children:"superadmin"})]}),(0,r.jsxs)("p",{children:["Password: ",(0,r.jsx)("span",{className:"font-mono text-gold",children:"admin123"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(a.Button,{variant:"secondary",className:"flex-1",type:"button",onClick:()=>{f("superadmin"),m("admin123")},children:"Fill Credentials"}),(0,r.jsx)(a.Button,{variant:"secondary",className:"flex-1",type:"button",onClick:S,disabled:b,children:b?"Seeding...":"Seed DB"})]}),j&&(0,r.jsx)("div",{className:"text-xs p-3 rounded whitespace-pre-line ".concat(j.startsWith("✅")?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"),children:j})]})]}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4 rounded-2xl border border-slate-800 bg-[#111b33]/90 p-6 backdrop-blur",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm text-slate-400",children:"Username"}),(0,r.jsx)(i.I,{value:c,onChange:e=>f(e.target.value),placeholder:"Enter username",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm text-slate-400",children:"Password"}),(0,r.jsx)(i.I,{value:p,onChange:e=>m(e.target.value),placeholder:"Enter password",type:"password",required:!0})]}),g&&(0,r.jsx)("p",{className:"rounded-lg border border-red-500/40 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:g}),(0,r.jsx)(a.Button,{type:"submit",className:"w-full",disabled:x,children:x?"Signing in...":"Sign in"}),(0,r.jsxs)("p",{className:"text-center text-xs text-slate-500",children:["Need help?"," ",(0,r.jsx)(d.default,{href:"/",className:"text-gold hover:underline",children:"Contact Admin"})]})]})]})})}l.Z.defaults.withCredentials=!0},89374:function(e,t,n){"use strict";n.d(t,{Button:function(){return m}});var r=n(57437),o=n(2265),l=n.t(o,2);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var a=Symbol.for("react.lazy"),i=l[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===a&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var u=function(e){let t=function(e){let t=o.forwardRef((e,t)=>{let{children:n,...r}=e;if(d(n)&&"function"==typeof i&&(n=i(n._payload)),o.isValidElement(n)){var l;let e,a;let i=(l=n,(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref),d=function(e,t){let n={...t};for(let r in t){let o=e[r],l=t[r];/^on[A-Z]/.test(r)?o&&l?n[r]=(...e)=>{let t=l(...e);return o(...e),t}:o&&(n[r]=o):"style"===r?n[r]={...o,...l}:"className"===r&&(n[r]=[o,l].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==o.Fragment&&(d.ref=t?function(...e){return t=>{let n=!1,r=e.map(e=>{let r=s(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():s(e[t],null)}}}}(t,i):i),o.cloneElement(n,d)}return o.Children.count(n)>1?o.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=o.forwardRef((e,n)=>{let{children:l,...s}=e;d(l)&&"function"==typeof i&&(l=i(l._payload));let a=o.Children.toArray(l),u=a.find(f);if(u){let e=u.props.children,l=a.map(t=>t!==u?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...s,ref:n,children:o.isValidElement(e)?o.cloneElement(e,void 0,l):null})}return(0,r.jsx)(t,{...s,ref:n,children:l})});return n.displayName=`${e}.Slot`,n}("Slot"),c=Symbol("radix.slottable");function f(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var p=n(61994);let m=(0,o.forwardRef)(function(e,t){let{className:n,variant:o="primary",asChild:l=!1,...s}=e,a="sm"===s.size?"px-3 py-1 text-sm":"lg"===s.size?"px-6 py-3 text-base":"px-4 py-2 text-sm";return(0,r.jsx)(l?u:"button",{ref:t,className:(0,p.Z)("inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]",a,{default:"",primary:"bg-gold text-black hover:bg-gold/90 focus:ring-gold/50",secondary:"border border-gold/50 text-gold hover:bg-gold/10 focus:ring-gold/30",ghost:"text-slate-300 hover:text-gold hover:bg-indigoPolice",outline:"border border-gold/40 text-gold hover:bg-gold/10 focus:ring-gold/30"}[o],n),...s})})},95186:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(57437),o=n(2265),l=n(61994);let s=(0,o.forwardRef)(function(e,t){let{className:n,...o}=e;return(0,r.jsx)("input",{ref:t,className:(0,l.Z)("w-full rounded-lg border border-slate-700 bg-[#101931] px-4 py-3 text-sm text-slate-100 placeholder:text-slate-500 focus:border-gold focus:outline-none focus:ring-2 focus:ring-gold/40 transition",n),...o})})},39763:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(2265),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let n=(0,r.forwardRef)((n,s)=>{let{color:a="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:u,className:c="",children:f,...p}=n;return(0,r.createElement)("svg",{ref:s,...o,width:i,height:i,stroke:a,strokeWidth:u?24*Number(d)/Number(i):d,className:["lucide","lucide-".concat(l(e)),c].join(" "),...p},[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(f)?f:[f]])});return n.displayName="".concat(e),n}},84286:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},27648:function(e,t,n){"use strict";n.d(t,{default:function(){return o.a}});var r=n(72972),o=n.n(r)},99376:function(e,t,n){"use strict";var r=n(35475);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},61994:function(e,t,n){"use strict";t.Z=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=function e(t){var n,r,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(n=0;n<l;n++)t[n]&&(r=e(t[n]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r)}return o}(e))&&(r&&(r+=" "),r+=t);return r}}},function(e){e.O(0,[972,464,971,117,744],function(){return e(e.s=76912)}),_N_E=e.O()}]);