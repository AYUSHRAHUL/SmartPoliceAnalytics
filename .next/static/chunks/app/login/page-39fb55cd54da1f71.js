(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{76912:function(e,t,r){Promise.resolve().then(r.bind(r,66374))},66374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(57437),l=r(2265),o=r(83464),s=r(99376),a=r(89374),i=r(95186),d=r(27648),u=r(84286);function c(){var e;let t=(0,s.useRouter)(),r=null!==(e=(0,s.useSearchParams)().get("redirect"))&&void 0!==e?e:"/dashboard",[c,f]=(0,l.useState)(""),[p,m]=(0,l.useState)(""),[g,h]=(0,l.useState)(null),[x,v]=(0,l.useState)(!1),[b,y]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),w=async e=>{e.preventDefault(),h(null),v(!0);try{let e=await o.Z.post("/api/auth/login",{username:c,password:p},{withCredentials:!0});e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("role",e.data.role),localStorage.setItem("username",e.data.username)),t.push(r),t.refresh()}catch(t){var n,l,s,a,i,d,u;let e=null!==(u=null!==(d=null==t?void 0:null===(l=t.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)&&void 0!==d?d:null==t?void 0:t.message)&&void 0!==u?u:"Login failed.";(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.status)===401?e="Invalid username or password. If this is your first time, click 'Seed DB' to create the demo account.":(null==t?void 0:null===(a=t.response)||void 0===a?void 0:a.status)===0||(null==t?void 0:t.code)==="ERR_NETWORK"?e="Cannot connect to server. Make sure the development server is running.":(null==t?void 0:null===(i=t.response)||void 0===i?void 0:i.status)&&t.response.status>=500&&(e="Server error. Check your MongoDB connection and try seeding the database."),h(e),console.error("Login error:",t)}finally{v(!1)}},S=async()=>{var e,t;N(null),y(!0);try{let t=await o.Z.post("/api/auth/seed"),r=(null===(e=t.data)||void 0===e?void 0:e.message)||"Database seeded successfully!";N("✅ ".concat(r," You can now login with superadmin/admin123")),f("superadmin"),m("admin123"),h(null)}catch(n){let e=null==n?void 0:null===(t=n.response)||void 0===t?void 0:t.data,r="Failed to seed database.";(null==e?void 0:e.hint)?r="".concat(e.error||r,"\n\n\uD83D\uDCA1 ").concat(e.hint):(null==e?void 0:e.message)?r=e.message:(null==n?void 0:n.code)==="ERR_NETWORK"&&(r="Cannot connect to server. Make sure the development server is running (npm run dev)."),N("❌ ".concat(r))}finally{y(!1)}};return(0,n.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center bg-[radial-gradient(circle_at_top,_#1C274A,_transparent_60%)] px-6",children:(0,n.jsxs)("div",{className:"w-full max-w-md space-y-6",children:[(0,n.jsxs)("div",{className:"rounded-2xl border border-gold/30 bg-[#111b33]/80 p-6 backdrop-blur",children:[(0,n.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,n.jsx)("div",{className:"rounded-full bg-gold/20 p-3 text-gold",children:(0,n.jsx)(u.Z,{className:"h-6 w-6"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gold",children:"Smart Police Analytics"}),(0,n.jsx)("p",{className:"text-xs text-slate-400",children:"Demo credentials available below"})]})]}),(0,n.jsxs)("div",{className:"rounded-xl border border-gold/20 bg-gold/10 p-4 text-sm text-slate-200 space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold text-gold mb-2",children:"Demo Account"}),(0,n.jsxs)("p",{children:["Username: ",(0,n.jsx)("span",{className:"font-mono text-gold",children:"superadmin"})]}),(0,n.jsxs)("p",{children:["Password: ",(0,n.jsx)("span",{className:"font-mono text-gold",children:"admin123"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(a.Button,{variant:"secondary",className:"flex-1",type:"button",onClick:()=>{f("superadmin"),m("admin123")},children:"Fill Credentials"}),(0,n.jsx)(a.Button,{variant:"secondary",className:"flex-1",type:"button",onClick:S,disabled:b,children:b?"Seeding...":"Seed DB"})]}),j&&(0,n.jsx)("div",{className:"text-xs p-3 rounded whitespace-pre-line ".concat(j.startsWith("✅")?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"),children:j})]})]}),(0,n.jsxs)("form",{onSubmit:w,className:"space-y-4 rounded-2xl border border-slate-800 bg-[#111b33]/90 p-6 backdrop-blur",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-2 block text-sm text-slate-400",children:"Username"}),(0,n.jsx)(i.I,{value:c,onChange:e=>f(e.target.value),placeholder:"Enter username",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-2 block text-sm text-slate-400",children:"Password"}),(0,n.jsx)(i.I,{value:p,onChange:e=>m(e.target.value),placeholder:"Enter password",type:"password",required:!0})]}),g&&(0,n.jsx)("p",{className:"rounded-lg border border-red-500/40 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:g}),(0,n.jsx)(a.Button,{type:"submit",className:"w-full",disabled:x,children:x?"Signing in...":"Sign in"}),(0,n.jsxs)("p",{className:"text-center text-xs text-slate-500",children:["Need help?"," ",(0,n.jsx)(d.default,{href:"/",className:"text-gold hover:underline",children:"Contact Admin"})]})]})]})})}o.Z.defaults.withCredentials=!0},89374:function(e,t,r){"use strict";r.d(t,{Button:function(){return m}});var n=r(57437),l=r(2265),o=r.t(l,2);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var a=Symbol.for("react.lazy"),i=o[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===a&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var u=function(e){let t=function(e){let t=l.forwardRef((e,t)=>{let{children:r,...n}=e;if(d(r)&&"function"==typeof i&&(r=i(r._payload)),l.isValidElement(r)){var o;let e,a;let i=(o=r,(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?o.props.ref:o.props.ref||o.ref),d=function(e,t){let r={...t};for(let n in t){let l=e[n],o=t[n];/^on[A-Z]/.test(n)?l&&o?r[n]=(...e)=>{let t=o(...e);return l(...e),t}:l&&(r[n]=l):"style"===n?r[n]={...l,...o}:"className"===n&&(r[n]=[l,o].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==l.Fragment&&(d.ref=t?function(...e){return t=>{let r=!1,n=e.map(e=>{let n=s(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():s(e[t],null)}}}}(t,i):i),l.cloneElement(r,d)}return l.Children.count(r)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=l.forwardRef((e,r)=>{let{children:o,...s}=e;d(o)&&"function"==typeof i&&(o=i(o._payload));let a=l.Children.toArray(o),u=a.find(f);if(u){let e=u.props.children,o=a.map(t=>t!==u?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...s,ref:r,children:l.isValidElement(e)?l.cloneElement(e,void 0,o):null})}return(0,n.jsx)(t,{...s,ref:r,children:o})});return r.displayName=`${e}.Slot`,r}("Slot"),c=Symbol("radix.slottable");function f(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var p=r(61994);let m=(0,l.forwardRef)(function(e,t){let{className:r,variant:l="primary",asChild:o=!1,...s}=e,a="sm"===s.size?"px-3 py-1 text-sm":"lg"===s.size?"px-6 py-3 text-base":"px-4 py-2 text-sm";return(0,n.jsx)(o?u:"button",{ref:t,className:(0,p.Z)("inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]",a,{default:"",primary:"bg-gold text-black hover:bg-gold/90 focus:ring-gold/50",secondary:"border border-gold/50 text-gold hover:bg-gold/10 focus:ring-gold/30",ghost:"text-slate-300 hover:text-gold hover:bg-indigoPolice",outline:"border border-gold/40 text-gold hover:bg-gold/10 focus:ring-gold/30"}[l],r),...s})})},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(57437),l=r(2265),o=r(61994);let s=(0,l.forwardRef)(function(e,t){let{className:r,...l}=e;return(0,n.jsx)("input",{ref:t,className:(0,o.Z)("w-full rounded-lg border border-slate-700 bg-[#101931] px-4 py-3 text-sm text-slate-100 placeholder:text-slate-500 focus:border-gold focus:outline-none focus:ring-2 focus:ring-gold/40 transition",r),...l})})},39763:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{color:a="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:u,className:c="",children:f,...p}=r;return(0,n.createElement)("svg",{ref:s,...l,width:i,height:i,stroke:a,strokeWidth:u?24*Number(d)/Number(i):d,className:["lucide","lucide-".concat(o(e)),c].join(" "),...p},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(f)?f:[f]])});return r.displayName="".concat(e),r}},84286:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return l.a}});var n=r(72972),l=r.n(n)},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},61994:function(e,t,r){"use strict";t.Z=function(){for(var e,t,r=0,n="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=function e(t){var r,n,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t){if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(l&&(l+=" "),l+=n)}else for(n in t)t[n]&&(l&&(l+=" "),l+=n)}return l}(e))&&(n&&(n+=" "),n+=t);return n}}},function(e){e.O(0,[972,464,971,117,744],function(){return e(e.s=76912)}),_N_E=e.O()}]);