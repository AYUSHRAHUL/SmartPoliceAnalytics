(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{93978:function(e,t,s){Promise.resolve().then(s.bind(s,12088)),Promise.resolve().then(s.bind(s,53242)),Promise.resolve().then(s.bind(s,12929)),Promise.resolve().then(s.bind(s,99554))},12088:function(e,t,s){"use strict";s.d(t,{AIInsightsPanel:function(){return o}});var a=s(57437),r=s(66070),l=s(39763);let i=(0,l.Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),n=(0,l.Z)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),c=(0,l.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var d=s(70525);function o(e){let{predictions:t,summary:s}=e,l=t.filter(e=>"high"===e.riskLevel),o=t.filter(e=>"medium"===e.riskLevel);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r.Card,{className:"p-6 bg-gradient-to-br from-slate-800 to-slate-900 border-gold/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(i,{className:"w-5 h-5 text-gold"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-100",children:"AI-Generated Summary"})]}),(0,a.jsx)("p",{className:"text-slate-300 leading-relaxed mb-4",children:s.summary}),s.highlights.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-400",children:"Key Highlights:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-300",children:s.highlights.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]}),(0,a.jsxs)(r.Card,{className:"p-6 bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(n,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-100",children:"Performance Predictions"})]}),l.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(c,{className:"w-5 h-5 text-red-400"}),(0,a.jsx)("h4",{className:"font-semibold text-red-400",children:"High Risk Districts"})]}),(0,a.jsx)("div",{className:"space-y-3",children:l.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h5",{className:"font-semibold text-slate-100",children:e.district}),(0,a.jsxs)("span",{className:"text-sm text-red-400",children:[e.currentScore.toFixed(1)," â†’ ",e.predictedScore.toFixed(1)]})]}),e.factors.length>0&&(0,a.jsx)("ul",{className:"list-disc list-inside text-xs text-slate-400 mb-2",children:e.factors.map((e,t)=>(0,a.jsx)("li",{children:e},t))}),(0,a.jsx)("p",{className:"text-xs text-slate-300",children:e.recommendation})]},t))})]}),o.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-yellow-400"}),(0,a.jsx)("h4",{className:"font-semibold text-yellow-400",children:"Medium Risk Districts"})]}),(0,a.jsx)("div",{className:"space-y-2",children:o.slice(0,3).map((e,t)=>(0,a.jsx)("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-slate-100",children:e.district}),(0,a.jsxs)("span",{className:"text-xs text-yellow-400",children:["Score: ",e.currentScore.toFixed(1)]})]})},t))})]})]})]})}},53242:function(e,t,s){"use strict";s.d(t,{DistrictPerformanceChart:function(){return m}});var a=s(57437),r=s(66070),l=s(47625),i=s(77031),n=s(56940),c=s(97059),d=s(62994),o=s(8147),x=s(22190),h=s(31699);function m(e){let{data:t}=e,s=t.slice(0,10).map(e=>({district:e.district.length>15?e.district.substring(0,15)+"...":e.district,"Cases Closed":e.totalCasesClosed,Convictions:e.totalConvictions,Detections:e.totalDetections,"Avg Score":Number(e.averageScore.toFixed(1))}));return(0,a.jsxs)(r.Card,{className:"p-6 bg-slate-800",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-100 mb-4",children:"District Performance Comparison"}),(0,a.jsx)(l.h,{width:"100%",height:400,children:(0,a.jsxs)(i.v,{data:s,children:[(0,a.jsx)(n.q,{strokeDasharray:"3 3",stroke:"#475569"}),(0,a.jsx)(c.K,{dataKey:"district",stroke:"#94a3b8",angle:-45,textAnchor:"end",height:100,fontSize:12}),(0,a.jsx)(d.B,{stroke:"#94a3b8"}),(0,a.jsx)(o.u,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px",color:"#f1f5f9"}}),(0,a.jsx)(x.D,{}),(0,a.jsx)(h.$,{dataKey:"Cases Closed",fill:"#3b82f6",radius:[4,4,0,0]}),(0,a.jsx)(h.$,{dataKey:"Convictions",fill:"#10b981",radius:[4,4,0,0]}),(0,a.jsx)(h.$,{dataKey:"Detections",fill:"#f59e0b",radius:[4,4,0,0]})]})})]})}},12929:function(e,t,s){"use strict";s.d(t,{TrendChart:function(){return p}});var a=s(57437),r=s(66070),l=s(47625),i=s(21156),n=s(56940),c=s(97059),d=s(62994),o=s(8147),x=s(54061),h=s(70525),m=s(3085);let u=(0,s(39763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function p(e){let{data:t,title:s,metric:p}=e,f=t.data.map(e=>({period:e.period,value:e.value})),j=()=>{switch(t.trend){case"increasing":return"#10b981";case"decreasing":return"#ef4444";default:return"#f59e0b"}};return(0,a.jsxs)(r.Card,{className:"p-6 bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-100",children:s}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{switch(t.trend){case"increasing":return(0,a.jsx)(h.Z,{className:"w-5 h-5 text-green-400"});case"decreasing":return(0,a.jsx)(m.Z,{className:"w-5 h-5 text-red-400"});default:return(0,a.jsx)(u,{className:"w-5 h-5 text-yellow-400"})}})(),(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat("increasing"===t.trend?"text-green-400":"decreasing"===t.trend?"text-red-400":"text-yellow-400"),children:[t.changePercent>0?"+":"",t.changePercent.toFixed(1),"%"]})]})]}),(0,a.jsx)(l.h,{width:"100%",height:300,children:(0,a.jsxs)(i.w,{data:f,children:[(0,a.jsx)(n.q,{strokeDasharray:"3 3",stroke:"#475569"}),(0,a.jsx)(c.K,{dataKey:"period",stroke:"#94a3b8",tick:{fill:"#94a3b8",fontSize:12}}),(0,a.jsx)(d.B,{stroke:"#94a3b8",tick:{fill:"#94a3b8",fontSize:12}}),(0,a.jsx)(o.u,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px",color:"#f1f5f9"}}),(0,a.jsx)(x.x,{type:"monotone",dataKey:"value",stroke:j(),strokeWidth:3,dot:{fill:j(),r:4},activeDot:{r:6}})]})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-slate-400",children:[(0,a.jsxs)("span",{children:["Average: ",t.average.toFixed(2)]}),(0,a.jsxs)("span",{children:["Periods: ",t.data.length]})]})]})}},99554:function(e,t,s){"use strict";s.d(t,{UnitLeaderboard:function(){return x}});var a=s(57437),r=s(2265),l=s(66070),i=s(49474),n=s(33327),c=s(95805),d=s(88906),o=s(70525);function x(e){let{type:t="department"}=e,[s,x]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{u()},[t]);let u=async()=>{try{let e=await fetch("/api/analytics/districts?top=20"),t=await e.json();if(t.success){let e=t.data.map((e,t)=>({unit:e.district,type:"district",totalOfficers:e.totalOfficers,averageScore:e.averageScore,totalCasesClosed:e.totalCasesClosed,totalConvictions:e.totalConvictions,totalDetections:e.totalDetections,rank:t+1,improvement:20*Math.random()-5}));x(e)}}catch(e){console.error("Failed to fetch unit rankings",e)}finally{m(!1)}},p=e=>1===e?(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full",children:(0,a.jsx)(i.Z,{className:"w-6 h-6 text-yellow-900"})}):2===e?(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full",children:(0,a.jsx)(n.Z,{className:"w-6 h-6 text-gray-900"})}):3===e?(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-amber-600 to-amber-800 rounded-full",children:(0,a.jsx)(n.Z,{className:"w-6 h-6 text-white"})}):(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-slate-700 rounded-full",children:(0,a.jsxs)("span",{className:"text-lg font-bold text-slate-300",children:["#",e]})}),f=e=>e>=70?"text-green-400":e>=50?"text-yellow-400":"text-red-400";return h?(0,a.jsx)(l.Card,{className:"p-6",children:(0,a.jsx)("div",{className:"text-center py-8 text-slate-400",children:"Loading unit rankings..."})}):(0,a.jsxs)(l.Card,{className:"p-6 bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-6 h-6 text-gold"}),(0,a.jsxs)("h2",{className:"text-2xl font-bold text-slate-100",children:["department"===t?"Department":"District"," Leaderboard"]})]}),(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"Team Performance"})]}),(0,a.jsx)("div",{className:"space-y-4",children:s.slice(0,10).map(e=>(0,a.jsx)("div",{className:"p-4 rounded-lg border transition-all hover:scale-[1.02] ".concat(e.rank<=3?"bg-gradient-to-r from-gold/10 to-gold/5 border-gold/40":"bg-slate-700/50 border-slate-600"),children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[p(e.rank),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-gold"}),(0,a.jsx)("h3",{className:"font-bold text-slate-100 text-lg",children:e.unit}),e.rank<=3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gold/20 text-gold rounded-full text-xs font-semibold",children:["Top ",e.rank]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Officers: "}),(0,a.jsx)("span",{className:"text-slate-100 font-medium",children:e.totalOfficers})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Cases: "}),(0,a.jsx)("span",{className:"text-slate-100 font-medium",children:e.totalCasesClosed})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Convictions: "}),(0,a.jsx)("span",{className:"text-slate-100 font-medium",children:e.totalConvictions})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Detections: "}),(0,a.jsx)("span",{className:"text-slate-100 font-medium",children:e.totalDetections})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold mb-1 ".concat(f(e.averageScore)),children:e.averageScore.toFixed(1)}),(0,a.jsx)("div",{className:"text-xs text-slate-400 mb-2",children:"Avg Score"}),e.improvement>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-green-400 text-sm",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["+",e.improvement.toFixed(1),"%"]})]})]})]})},e.unit))}),0===s.length&&(0,a.jsx)("div",{className:"text-center py-8 text-slate-400",children:"No unit data available"})]})}},66070:function(e,t,s){"use strict";s.d(t,{Card:function(){return l}});var a=s(57437),r=s(61994);function l(e){let{className:t,children:s}=e;return(0,a.jsx)("div",{className:(0,r.Z)("rounded-2xl border border-slate-800 bg-[#111b33] shadow-lg shadow-black/10",t),children:s})}},39763:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{color:n="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:x="",children:h,...m}=s;return(0,a.createElement)("svg",{ref:i,...r,width:c,height:c,stroke:n,strokeWidth:o?24*Number(d)/Number(c):d,className:["lucide","lucide-".concat(l(e)),x].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},33327:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},88906:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},3085:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},70525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},49474:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},95805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},77031:function(e,t,s){"use strict";s.d(t,{v:function(){return c}});var a=s(93765),r=s(31699),l=s(97059),i=s(62994),n=s(25311),c=(0,a.z)({chartName:"BarChart",GraphicalChild:r.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:l.K},{axisType:"yAxis",AxisComp:i.B}],formatAxisMap:n.t9})}},function(e){e.O(0,[617,156,971,117,744],function(){return e(e.s=93978)}),_N_E=e.O()}]);