exports.id=2964,exports.ids=[2964],exports.modules={91135:(e,t,r)=>{Promise.resolve().then(r.bind(r,90641))},87373:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,63642,23)),Promise.resolve().then(r.t.bind(r,87586,23)),Promise.resolve().then(r.t.bind(r,47838,23)),Promise.resolve().then(r.t.bind(r,58057,23)),Promise.resolve().then(r.t.bind(r,77741,23)),Promise.resolve().then(r.t.bind(r,13118,23))},87527:()=>{},90641:(e,t,r)=>{"use strict";r.d(t,{ProtectedShell:()=>j});var a=r(97247),i=r(34178),s=r(79906),d=r(1423),l=r(81621),n=r(97792),o=r(9527),c=r(62673),u=r(70712),m=r(82522),p=r(66903),f=r(69964),b=r(57989);let y=[{href:"/dashboard",label:"Overview",icon:d.Z},{href:"/leaderboard",label:"Leaderboard",icon:l.Z},{href:"/analytics",label:"Analytics",icon:n.Z},{href:"/districts",label:"Districts",icon:o.Z},{href:"/drives",label:"Drives",icon:c.Z},{href:"/special-drives",label:"Special Drives",icon:u.Z},{href:"/map",label:"Map View",icon:m.Z},{href:"/recognitions",label:"Recognitions",icon:l.Z},{href:"/reports",label:"Reports",icon:p.Z},{href:"/data-ingestion",label:"Data Ingestion",icon:f.Z},{href:"/admin",label:"Admin",icon:b.Z}];function g(){let e=(0,i.usePathname)();return(0,a.jsxs)("aside",{className:"hidden lg:flex w-64 flex-col border-r border-slate-800 bg-[#101931]",children:[a.jsx("div",{className:"p-6",children:a.jsx("h2",{className:"text-sm uppercase tracking-wide text-slate-400",children:"Navigation"})}),a.jsx("nav",{className:"flex-1 px-2 space-y-1",children:y.map(t=>{let r=t.icon,i=e.startsWith(t.href);return(0,a.jsxs)(s.default,{href:t.href,className:`flex items-center gap-3 rounded-lg px-4 py-3 text-sm transition ${i?"bg-gold/20 text-gold border border-gold/40":"text-slate-300 hover:bg-indigoPolice hover:text-gold"}`,children:[a.jsx(r,{className:"h-4 w-4"}),t.label]},t.href)})}),(0,a.jsxs)("div",{className:"p-4 text-xs text-slate-500 border-t border-slate-800",children:["\xa9 ",new Date().getFullYear()," Team Innosphere. All rights reserved."]})]})}var h=r(12662),N=r(5495),x=r(19400),v=r(83128),S=r(28964);let D=[{href:"/dashboard",label:"Dashboard"},{href:"/leaderboard",label:"Leaderboard"},{href:"/analytics",label:"Analytics"},{href:"/recognitions",label:"Recognitions"},{href:"/reports",label:"Reports"},{href:"/admin",label:"Admin"}];function w({username:e}){let t=(0,i.usePathname)(),r=(0,i.useRouter)(),[d,l]=(0,S.useState)(!0),n=async()=>{await v.Z.post("/api/auth/logout"),r.push("/login")};return(0,a.jsxs)("header",{className:"flex items-center justify-between border-b border-slate-800 bg-indigoPolice-dark px-6 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[a.jsx(s.default,{href:"/dashboard",className:"text-lg font-semibold text-gold",children:"Smart Police Analytics"}),a.jsx("nav",{className:"hidden md:flex items-center gap-4 text-sm text-slate-300",children:D.map(e=>a.jsx(s.default,{href:e.href,className:`hover:text-gold transition ${t.startsWith(e.href)?"text-gold font-semibold":""}`,children:e.label},e.href))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx("button",{onClick:()=>l(e=>!e),className:"rounded-lg border border-slate-700 p-2 text-slate-300 hover:border-gold/60 hover:text-gold transition",children:d?a.jsx(h.Z,{className:"h-4 w-4"}):a.jsx(N.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"hidden md:flex flex-col text-right text-xs text-slate-400",children:[a.jsx("span",{className:"text-slate-200 font-semibold",children:e??"User"}),a.jsx("span",{children:"Team Innosphere"})]}),(0,a.jsxs)("button",{onClick:n,className:"inline-flex items-center gap-2 rounded-lg bg-gold px-3 py-2 text-xs font-semibold text-black hover:bg-gold/90 transition",children:[a.jsx(x.Z,{className:"h-4 w-4"}),"Logout"]})]})]})}var P=r(37013),_=r(6683);let C=[{href:"/dashboard",label:"Overview",icon:d.Z},{href:"/leaderboard",label:"Leaderboard",icon:l.Z},{href:"/analytics",label:"Analytics",icon:n.Z},{href:"/districts",label:"Districts",icon:o.Z},{href:"/drives",label:"Drives",icon:c.Z},{href:"/map",label:"Map",icon:m.Z},{href:"/recognitions",label:"Recognitions",icon:l.Z},{href:"/reports",label:"Reports",icon:p.Z},{href:"/data-ingestion",label:"Upload",icon:f.Z},{href:"/admin",label:"Admin",icon:b.Z}];function E(){let[e,t]=(0,S.useState)(!1),r=(0,i.usePathname)();return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"lg:hidden fixed bottom-4 right-4 z-50",children:a.jsx("button",{onClick:()=>t(!e),className:"w-14 h-14 bg-gold rounded-full shadow-lg flex items-center justify-center text-slate-900 hover:bg-gold/90 transition-colors",children:e?a.jsx(P.Z,{className:"w-6 h-6"}):a.jsx(_.Z,{className:"w-6 h-6"})})}),e&&a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>t(!1),children:(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-700 rounded-t-2xl p-4 max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg font-bold text-slate-100 mb-2",children:"Navigation"})}),a.jsx("nav",{className:"space-y-2",children:C.map(e=>{let i=e.icon,d=r.startsWith(e.href);return(0,a.jsxs)(s.default,{href:e.href,onClick:()=>t(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition ${d?"bg-gold/20 text-gold border border-gold/40":"text-slate-300 hover:bg-slate-800"}`,children:[a.jsx(i,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e.label})]},e.href)})})]})})]})}function j({children:e,username:t}){let r=(0,i.usePathname)().startsWith("/admin");return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0b1220] text-slate-100",children:[a.jsx(w,{username:t}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx(g,{}),(0,a.jsxs)("main",{className:"flex-1 min-h-[calc(100vh-64px)] bg-[#0b1220]",children:[(0,a.jsxs)("div",{className:"space-y-2 border-b border-slate-800 bg-[#101931] px-6 py-4 text-sm text-slate-400",children:[a.jsx("div",{className:"rounded-lg border border-gold/40 bg-gold/10 px-4 py-2 text-xs text-gold",children:"Demo mode enabled. All analytics and leaderboard data use simulated officer records."}),r?"Admin Control Center â€¢ Manage officers, weights, and recognition rules":"Welcome to the Smart Police Analytics dashboard"]}),a.jsx("div",{className:"px-6 py-6",children:e})]})]}),a.jsx(E,{})]})}},27757:(e,t,r)=>{"use strict";r.d(t,{Card:()=>s});var a=r(97247),i=r(61929);function s({className:e,children:t}){return a.jsx("div",{className:(0,i.Z)("rounded-2xl border border-slate-800 bg-[#111b33] shadow-lg shadow-black/10",e),children:t})}},69738:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(72051),i=r(41288);let s=(0,r(45347).createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\layout\ProtectedShell.tsx#ProtectedShell`);var d=r(51639);async function l({children:e}){let t=await (0,d.t)();return t||(0,i.redirect)("/login"),a.jsx(s,{username:t.username,children:e})}},54403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,dynamic:()=>d,metadata:()=>l});var a=r(72051),i=r(45662),s=r.n(i);r(67272);let d="force-dynamic",l={title:"Smart Police Analytics",description:"AI-powered analytics dashboard for police good work recognition."};function n({children:e}){return a.jsx("html",{lang:"en",className:"bg-[#0b1220]",children:a.jsx("body",{className:`${s().variable} antialiased bg-[#0b1220] text-slate-100`,children:e})})}},16910:(e,t,r)=>{"use strict";r.d(t,{$v:()=>p,I2:()=>f,Md:()=>o,Oe:()=>u,c_:()=>c,w5:()=>b,z:()=>m});var a=r(63506),i=r.n(a),s=r(67390),d=r.n(s),l=r(52845),n=r(56377);let o="police-dashboard-token";function c(e){return i().hash(e,10)}function u(e,t){return i().compare(e,t)}function m(e){let t=n.O.JWT_SECRET,r=n.O.JWT_EXPIRES_IN||"7d";return d().sign(e,t,{expiresIn:r})}function p(e){let t=n.O.JWT_SECRET;return d().verify(e,t)}function f(){(0,l.cookies)().delete(o)}function b(){return l.cookies().get(o)?.value??null}},1035:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});var a=r(11185),i=r.n(a),s=r(56377);let d=global,l=d.mongooseConn;async function n(){if(l.conn)return l.conn;if(!l.promise){let e=s.O.MONGODB_URI||"mongodb://localhost:27017/police_analytics";l.promise=i().connect(e,{dbName:"police_analytics"}).catch(e=>{throw l.promise=null,e})}try{return l.conn=await l.promise,l.conn}catch(e){throw l.promise=null,e}}l||(l=d.mongooseConn={conn:null,promise:null})},56377:(e,t,r)=>{"use strict";let a;r.d(t,{O:()=>c});var i=r(93389);let s=i.Ry({NEXT_PUBLIC_APP_NAME:i.Z_().default("Smart Police Analytics"),NEXT_PUBLIC_DEMO_MODE:i.Km(["0","1"]).default("0")}),d=i.Ry({MONGODB_URI:i.Z_().min(1,"MONGODB_URI is required"),JWT_SECRET:i.Z_().min(32,"JWT_SECRET must be at least 32 characters"),JWT_EXPIRES_IN:i.Z_().default("7d"),APP_URL:i.Z_().url().default("http://localhost:3000"),ANALYTICS_SERVICE_URL:i.Z_().url().optional()}),l=s.safeParse({NEXT_PUBLIC_APP_NAME:process.env.NEXT_PUBLIC_APP_NAME,NEXT_PUBLIC_DEMO_MODE:"1"});l.success||console.warn("Invalid client environment variables",l.error.flatten().fieldErrors);let n={MONGODB_URI:process.env.MONGODB_URI||"",JWT_SECRET:process.env.JWT_SECRET||"",JWT_EXPIRES_IN:process.env.JWT_EXPIRES_IN||"7d",APP_URL:process.env.APP_URL||"http://localhost:3000",ANALYTICS_SERVICE_URL:process.env.ANALYTICS_SERVICE_URL},o=d.safeParse(n);if(o.success)a=o.data;else throw console.error("Invalid server environment variables:",o.error.flatten().fieldErrors),Error(`Invalid server environment variables: ${JSON.stringify(o.error.flatten().fieldErrors)}`);let c={...l.data||{},...a}},9094:(e,t,r)=>{"use strict";r.d(t,{Ge:()=>b,OP:()=>g,_1:()=>x,nf:()=>v,py:()=>N,t0:()=>h,tB:()=>p,um:()=>f,x6:()=>y});var a=r(11185);let i=new a.Schema({district:{type:String,required:!0},totalNBWPendingStart:{type:Number,default:0},nbwReceived:{type:Number,default:0},total:{type:Number,default:0},nbwExecutedDuringDrive:{type:Number,default:0},nbwOtherwiseDisposed:{type:Number,default:0},totalDisposed:{type:Number,default:0},nbwPendingEnd:{type:Number,default:0},nbwExecutedSTGR:{type:Number,default:0},nbwExecutedST:{type:Number,default:0},nbwExecutedGR:{type:Number,default:0},nbwExecutedOther:{type:Number,default:0},totalRecalled:{type:Number,default:0},returned:{type:Number,default:0},totalBefore:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),s=new a.Schema({district:{type:String,required:!0},casesRegistered:{type:Number,default:0},personsArrested:{type:Number,default:0},gunsRifles:{type:Number,default:0},pistols:{type:Number,default:0},revolvers:{type:Number,default:0},mouzers:{type:Number,default:0},ak47:{type:Number,default:0},slr:{type:Number,default:0},others:{type:Number,default:0},ammunition:{type:Number,default:0},cartridges:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),d=new a.Schema({district:{type:String,required:!0},casesRegistered:{type:Number,default:0},vehiclesSeized:{type:Number,default:0},personsArrested:{type:Number,default:0},noticeServed:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),l=new a.Schema({district:{type:String,required:!0},boyMissingStart:{type:Number,default:0},boyMissingDuring:{type:Number,default:0},boyTraced:{type:Number,default:0},girlMissingStart:{type:Number,default:0},girlMissingDuring:{type:Number,default:0},girlTraced:{type:Number,default:0},maleMissingStart:{type:Number,default:0},maleMissingDuring:{type:Number,default:0},maleTraced:{type:Number,default:0},femaleMissingStart:{type:Number,default:0},femaleMissingDuring:{type:Number,default:0},femaleTraced:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),n=new a.Schema({district:{type:String,required:!0},casesReportedYear:{type:Number,default:0},casesPending30Days:{type:Number,default:0},pendencyPercent:{type:Number,default:0},targetCasesToClose:{type:Number,default:0},casesClosedInDrive:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),o=new a.Schema({district:{type:String,required:!0},notice129BNSS:{type:Number,default:0},boundDown129BNSS:{type:Number,default:0},notice126BNSS:{type:Number,default:0},boundDown126BNSS:{type:Number,default:0},bookedUnderNSA:{type:Number,default:0},nbwExecuted:{type:Number,default:0},casesForcibleChanda:{type:Number,default:0},arrestsForChanda:{type:Number,default:0},blockingsBorderSealings:{type:Number,default:0},actionAgainstOrganizedCrime:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),c=new a.Schema({district:{type:String,required:!0},exciseCasesRegistered:{type:Number,default:0},personsArrested:{type:Number,default:0},detailsOfSeizure:{type:String,default:""},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),u=new a.Schema({district:{type:String,required:!0},opgCasesRegistered:{type:Number,default:0},personsArrested:{type:Number,default:0},detailsOfSeizure:{type:String,default:""},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),m=new a.Schema({district:{type:String,required:!0},casesRegistered:{type:Number,default:0},personsArrested:{type:Number,default:0},ganja:{type:Number,default:0},brownSugar:{type:Number,default:0},vehicles:{type:Number,default:0},ganjaPlantsDestroyed:{type:Number,default:0},bhang:{type:Number,default:0},opium:{type:Number,default:0},coughSyrup:{type:Number,default:0},cash:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0});i.index({district:1,driveDate:-1}),s.index({district:1,driveDate:-1}),d.index({district:1,driveDate:-1}),l.index({district:1,driveDate:-1}),n.index({district:1,driveDate:-1}),o.index({district:1,driveDate:-1}),c.index({district:1,driveDate:-1}),u.index({district:1,driveDate:-1}),m.index({district:1,driveDate:-1});let p=a.models.NBWDrive||(0,a.model)("NBWDrive",i),f=a.models.FirearmsDrive||(0,a.model)("FirearmsDrive",s),b=a.models.SandMiningDrive||(0,a.model)("SandMiningDrive",d),y=a.models.MissingPersonsDrive||(0,a.model)("MissingPersonsDrive",l),g=a.models.CasePendencyDrive||(0,a.model)("CasePendencyDrive",n),h=a.models.PreventiveMeasuresDrive||(0,a.model)("PreventiveMeasuresDrive",o),N=a.models.ExciseAct||(0,a.model)("ExciseAct",c),x=a.models.OPGAct||(0,a.model)("OPGAct",u),v=a.models.NarcoticsEnforcement||(0,a.model)("NarcoticsEnforcement",m)},21899:(e,t,r)=>{"use strict";r.d(t,{GX:()=>s,J0:()=>p,f3:()=>g,GU:()=>b,bx:()=>u,pB:()=>l,rB:()=>o});var a=r(11185);let i=new a.Schema({username:{type:String,required:!0,unique:!0},password:{type:String,required:!0},role:{type:String,enum:["Officer","Admin","SuperAdmin"],default:"Admin"}},{timestamps:!0}),s=a.models.Admin||(0,a.model)("Admin",i),d=new a.Schema({name:{type:String,required:!0},badgeId:{type:String,required:!0,unique:!0},department:{type:String,required:!0},designation:{type:String,required:!0},district:{type:String},caseClosed:{type:Number,default:0},cyberResolved:{type:Number,default:0},feedbackScore:{type:Number,default:0},awarenessPrograms:{type:Number,default:0},emergencyResponses:{type:Number,default:0},totalScore:{type:Number,default:0},lastUpdated:{type:Date,default:()=>new Date}},{timestamps:!0});d.index({badgeId:1}),d.index({department:1}),d.index({totalScore:-1});let l=a.models.Officer||(0,a.model)("Officer",d),n=new a.Schema({officerId:{type:a.Schema.Types.ObjectId,ref:"Officer",required:!0},month:{type:String,required:!0},badge:{type:String,enum:["Gold","Silver","Bronze"],required:!0},message:{type:String},recognizedBy:{type:String,required:!0},date:{type:Date,default:()=>new Date}},{timestamps:!0});n.index({officerId:1,month:1});let o=a.models.Recognition||(0,a.model)("Recognition",n),c=new a.Schema({caseClosedWeight:{type:Number,default:.4},cyberResolvedWeight:{type:Number,default:.3},feedbackWeight:{type:Number,default:.2},awarenessWeight:{type:Number,default:.1}},{timestamps:!0}),u=a.models.KPIWeights||(0,a.model)("KPIWeights",c),m=new a.Schema({action:{type:String,required:!0},entity:{type:String,required:!0},entityId:{type:String,required:!0},user:{type:String,default:"system"},metadata:{type:a.Schema.Types.Mixed}},{timestamps:!0});m.index({entity:1,createdAt:-1});let p=a.models.AuditLog||(0,a.model)("AuditLog",m),f=new a.Schema({filename:{type:String,required:!0},source:{type:String,enum:["CCTNS_SpecialDrives","CCTNS_Convictions","CCTNS_Detections","Manual","Excel","CSV","PDF"],required:!0},status:{type:String,enum:["pending","processing","completed","failed"],default:"pending"},totalRecords:{type:Number,default:0},processedRecords:{type:Number,default:0},failedRecords:{type:Number,default:0},errors:[{row:Number,field:String,message:String}],uploadedBy:{type:String,required:!0},metadata:{type:a.Schema.Types.Mixed}},{timestamps:!0});f.index({uploadedBy:1,createdAt:-1}),f.index({status:1});let b=a.models.ImportLog||(0,a.model)("ImportLog",f),y=new a.Schema({module:{type:String,enum:["SpecialDrives","Convictions","Detections"],required:!0},officerBadgeId:{type:String,required:!0},officerName:{type:String},department:{type:String},district:{type:String},driveName:{type:String},driveDate:{type:Date},casesHandled:{type:Number},caseNumber:{type:String},convictionDate:{type:Date},crimeType:{type:String},courtName:{type:String},detectionDate:{type:Date},crimeCategory:{type:String},valueRecovered:{type:Number},rawData:{type:a.Schema.Types.Mixed},importLogId:{type:a.Schema.Types.ObjectId,ref:"ImportLog",required:!0}},{timestamps:!0});y.index({officerBadgeId:1,module:1}),y.index({importLogId:1}),y.index({module:1,createdAt:-1});let g=a.models.CCTNSData||(0,a.model)("CCTNSData",y);r(9094)},51639:(e,t,r)=>{"use strict";r.d(t,{t:()=>l});var a=r(26269),i=r(1035),s=r(21899),d=r(16910);let l=(0,a.cache)(async()=>{let e=(0,d.w5)();if(!e)return null;try{let t=(0,d.$v)(e);await (0,i.Q)();let r=await s.GX.findById(t.sub).select("-password").lean();if(!r)return null;return{id:r._id.toString(),username:r.username,role:t.role}}catch(e){return console.warn("Failed to get current user",e),null}})},67272:()=>{}};