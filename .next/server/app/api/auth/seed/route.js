"use strict";(()=>{var e={};e.id=1254,e.ids=[1254],e.modules={11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},88683:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>x,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f});var n={};r.r(n),r.d(n,{POST:()=>p,runtime:()=>l});var s=r(73278),o=r(45002),a=r(54877),i=r(1035),u=r(21899),c=r(16910),d=r(51104);let l="nodejs";async function p(){try{try{await (0,i.Q)()}catch(t){let e=(t instanceof Error?t.message:String(t))||"Unknown database error";if(e.includes("ECONNREFUSED")||e.includes("ENOTFOUND"))return(0,d.I3)("Cannot connect to MongoDB. Please check your MONGODB_URI in .env.local",{error:"Database connection failed",hint:"Make sure MongoDB is running and MONGODB_URI is correct in .env.local"});throw t}let e=!1;if(!await u.GX.findOne({role:"SuperAdmin"})){let t=await (0,c.c_)("admin123");await u.GX.create({username:"superadmin",password:t,role:"SuperAdmin"}),e=!0}let t=!1;return await u.bx.findOne()||(await u.bx.create({}),t=!0),(0,d.ok)({message:e?"Database seeded successfully! Demo account created.":"Database already seeded. Demo account exists.",adminCreated:e,weightsCreated:t,credentials:{username:"superadmin",password:"admin123"}})}catch(t){console.error("Seed error:",t);let e=(t instanceof Error?t.message:String(t))||"Unknown error";return(0,d.I3)("Failed to seed database",{error:e,hint:"Check your MongoDB connection string in .env.local"})}}let m=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/seed/route",pathname:"/api/auth/seed",filename:"route",bundlePath:"app/api/auth/seed/route"},resolvedPagePath:"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\api\\auth\\seed\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:x,staticGenerationAsyncStorage:f,serverHooks:h}=m,g="/api/auth/seed/route";function v(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},16910:(e,t,r)=>{r.d(t,{$v:()=>m,I2:()=>x,Md:()=>c,Oe:()=>l,c_:()=>d,w5:()=>f,z:()=>p});var n=r(63506),s=r.n(n),o=r(67390),a=r.n(o),i=r(52845),u=r(56377);let c="police-dashboard-token";function d(e){return s().hash(e,10)}function l(e,t){return s().compare(e,t)}function p(e){let t=u.O.JWT_SECRET,r=u.O.JWT_EXPIRES_IN||"7d";return a().sign(e,t,{expiresIn:r})}function m(e){let t=u.O.JWT_SECRET;return a().verify(e,t)}function x(){(0,i.cookies)().delete(c)}function f(){return i.cookies().get(c)?.value??null}},51104:(e,t,r)=>{r.d(t,{Hs:()=>i,I3:()=>d,ID:()=>u,i2:()=>o,ok:()=>s,v6:()=>c,yw:()=>a});var n=r(71309);function s(e,t){return n.NextResponse.json({success:!0,data:e},{status:200,...t})}function o(e){return n.NextResponse.json({success:!0,data:e},{status:201})}function a(e,t){return n.NextResponse.json({success:!1,message:e,details:t},{status:400})}function i(e="Unauthorized"){return n.NextResponse.json({success:!1,message:e},{status:401})}function u(e="Forbidden"){return n.NextResponse.json({success:!1,message:e},{status:403})}function c(e="Not found"){return n.NextResponse.json({success:!1,message:e},{status:404})}function d(e="Internal server error",t){return console.error(e,t),n.NextResponse.json({success:!1,message:e},{status:500})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[7787,5541,5405,4833,540],()=>r(88683));module.exports=n})();