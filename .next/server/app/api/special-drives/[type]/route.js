"use strict";(()=>{var e={};e.id=256,e.ids=[256],e.modules={11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},38912:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>D,requestAsyncStorage:()=>N,routeModule:()=>y,serverHooks:()=>v,staticGenerationAsyncStorage:()=>b});var a={};r.r(a),r.d(a,{GET:()=>m,POST:()=>f,runtime:()=>p});var s=r(73278),i=r(45002),n=r(54877),u=r(1035),d=r(9094),l=r(13534),o=r(51104);let p="nodejs",c={nbw:d.tB,firearms:d.um,"sand-mining":d.Ge,"missing-persons":d.x6,"case-pendency":d.OP,"preventive-measures":d.t0,excise:d.py,opg:d._1,narcotics:d.nf};async function m(e,{params:t}){try{await (0,u.Q)();let{searchParams:r}=new URL(e.url),a=r.get("district"),s=c[t.type];if(!s)return(0,o.yw)(`Invalid drive type: ${t.type}`);let i=await s.find(a?{district:a}:{}).sort({driveDate:-1}).lean();return(0,o.ok)(i)}catch(e){return(0,o.I3)("Failed to fetch special drive data",e)}}async function f(e,{params:t}){let r=(0,l.m)(e);if(!("role"in r))return r;if("Officer"===r.role)return(0,o.yw)("Insufficient permissions");try{await (0,u.Q)();let r=c[t.type];if(!r)return(0,o.yw)(`Invalid drive type: ${t.type}`);let a=await e.json(),s=await r.create(a);return(0,o.i2)(s)}catch(e){return(0,o.I3)("Failed to create special drive data",e)}}let y=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/special-drives/[type]/route",pathname:"/api/special-drives/[type]",filename:"route",bundlePath:"app/api/special-drives/[type]/route"},resolvedPagePath:"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\api\\special-drives\\[type]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:N,staticGenerationAsyncStorage:b,serverHooks:v}=y,g="/api/special-drives/[type]/route";function D(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:b})}},16910:(e,t,r)=>{r.d(t,{$v:()=>m,I2:()=>f,Md:()=>l,Oe:()=>p,c_:()=>o,w5:()=>y,z:()=>c});var a=r(63506),s=r.n(a),i=r(67390),n=r.n(i),u=r(52845),d=r(56377);let l="police-dashboard-token";function o(e){return s().hash(e,10)}function p(e,t){return s().compare(e,t)}function c(e){let t=d.O.JWT_SECRET,r=d.O.JWT_EXPIRES_IN||"7d";return n().sign(e,t,{expiresIn:r})}function m(e){let t=d.O.JWT_SECRET;return n().verify(e,t)}function f(){(0,u.cookies)().delete(l)}function y(){return u.cookies().get(l)?.value??null}},1035:(e,t,r)=>{r.d(t,{Q:()=>i}),r(11185),r(56377);let a=global,s=a.mongooseConn;async function i(){return null}s||(s=a.mongooseConn={conn:null,promise:null})},56377:(e,t,r)=>{let a;r.d(t,{O:()=>o});var s=r(93389);let i=s.Ry({NEXT_PUBLIC_APP_NAME:s.Z_().default("Smart Police Analytics"),NEXT_PUBLIC_DEMO_MODE:s.Km(["0","1"]).default("0")}),n=s.Ry({MONGODB_URI:s.Z_().min(1,"MONGODB_URI is required"),JWT_SECRET:s.Z_().min(32,"JWT_SECRET must be at least 32 characters"),JWT_EXPIRES_IN:s.Z_().default("7d"),APP_URL:s.Z_().url().default("http://localhost:3000"),ANALYTICS_SERVICE_URL:s.Z_().url().optional()}),u=i.safeParse({NEXT_PUBLIC_APP_NAME:process.env.NEXT_PUBLIC_APP_NAME,NEXT_PUBLIC_DEMO_MODE:"1"});u.success||console.warn("Invalid client environment variables",u.error.flatten().fieldErrors);let d={MONGODB_URI:process.env.MONGODB_URI||"",JWT_SECRET:process.env.JWT_SECRET||"",JWT_EXPIRES_IN:process.env.JWT_EXPIRES_IN||"7d",APP_URL:process.env.APP_URL||"http://localhost:3000",ANALYTICS_SERVICE_URL:process.env.ANALYTICS_SERVICE_URL},l=n.safeParse(d);if(l.success)a=l.data;else throw console.error("Invalid server environment variables:",l.error.flatten().fieldErrors),Error(`Invalid server environment variables: ${JSON.stringify(l.error.flatten().fieldErrors)}`);let o={...u.data||{},...a}},51104:(e,t,r)=>{r.d(t,{Hs:()=>u,I3:()=>o,ID:()=>d,i2:()=>i,ok:()=>s,v6:()=>l,yw:()=>n});var a=r(71309);function s(e,t){return a.NextResponse.json({success:!0,data:e},{status:200,...t})}function i(e){return a.NextResponse.json({success:!0,data:e},{status:201})}function n(e,t){return a.NextResponse.json({success:!1,message:e,details:t},{status:400})}function u(e="Unauthorized"){return a.NextResponse.json({success:!1,message:e},{status:401})}function d(e="Forbidden"){return a.NextResponse.json({success:!1,message:e},{status:403})}function l(e="Not found"){return a.NextResponse.json({success:!1,message:e},{status:404})}function o(e="Internal server error",t){return console.error(e,t),a.NextResponse.json({success:!1,message:e},{status:500})}},9094:(e,t,r)=>{r.d(t,{Ge:()=>y,OP:()=>b,_1:()=>D,nf:()=>S,py:()=>g,t0:()=>v,tB:()=>m,um:()=>f,x6:()=>N});var a=r(11185);let s=new a.Schema({district:{type:String,required:!0},totalNBWPendingStart:{type:Number,default:0},nbwReceived:{type:Number,default:0},total:{type:Number,default:0},nbwExecutedDuringDrive:{type:Number,default:0},nbwOtherwiseDisposed:{type:Number,default:0},totalDisposed:{type:Number,default:0},nbwPendingEnd:{type:Number,default:0},nbwExecutedSTGR:{type:Number,default:0},nbwExecutedST:{type:Number,default:0},nbwExecutedGR:{type:Number,default:0},nbwExecutedOther:{type:Number,default:0},totalRecalled:{type:Number,default:0},returned:{type:Number,default:0},totalBefore:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),i=new a.Schema({district:{type:String,required:!0},casesRegistered:{type:Number,default:0},personsArrested:{type:Number,default:0},gunsRifles:{type:Number,default:0},pistols:{type:Number,default:0},revolvers:{type:Number,default:0},mouzers:{type:Number,default:0},ak47:{type:Number,default:0},slr:{type:Number,default:0},others:{type:Number,default:0},ammunition:{type:Number,default:0},cartridges:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),n=new a.Schema({district:{type:String,required:!0},casesRegistered:{type:Number,default:0},vehiclesSeized:{type:Number,default:0},personsArrested:{type:Number,default:0},noticeServed:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),u=new a.Schema({district:{type:String,required:!0},boyMissingStart:{type:Number,default:0},boyMissingDuring:{type:Number,default:0},boyTraced:{type:Number,default:0},girlMissingStart:{type:Number,default:0},girlMissingDuring:{type:Number,default:0},girlTraced:{type:Number,default:0},maleMissingStart:{type:Number,default:0},maleMissingDuring:{type:Number,default:0},maleTraced:{type:Number,default:0},femaleMissingStart:{type:Number,default:0},femaleMissingDuring:{type:Number,default:0},femaleTraced:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),d=new a.Schema({district:{type:String,required:!0},casesReportedYear:{type:Number,default:0},casesPending30Days:{type:Number,default:0},pendencyPercent:{type:Number,default:0},targetCasesToClose:{type:Number,default:0},casesClosedInDrive:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),l=new a.Schema({district:{type:String,required:!0},notice129BNSS:{type:Number,default:0},boundDown129BNSS:{type:Number,default:0},notice126BNSS:{type:Number,default:0},boundDown126BNSS:{type:Number,default:0},bookedUnderNSA:{type:Number,default:0},nbwExecuted:{type:Number,default:0},casesForcibleChanda:{type:Number,default:0},arrestsForChanda:{type:Number,default:0},blockingsBorderSealings:{type:Number,default:0},actionAgainstOrganizedCrime:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),o=new a.Schema({district:{type:String,required:!0},exciseCasesRegistered:{type:Number,default:0},personsArrested:{type:Number,default:0},detailsOfSeizure:{type:String,default:""},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),p=new a.Schema({district:{type:String,required:!0},opgCasesRegistered:{type:Number,default:0},personsArrested:{type:Number,default:0},detailsOfSeizure:{type:String,default:""},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0}),c=new a.Schema({district:{type:String,required:!0},casesRegistered:{type:Number,default:0},personsArrested:{type:Number,default:0},ganja:{type:Number,default:0},brownSugar:{type:Number,default:0},vehicles:{type:Number,default:0},ganjaPlantsDestroyed:{type:Number,default:0},bhang:{type:Number,default:0},opium:{type:Number,default:0},coughSyrup:{type:Number,default:0},cash:{type:Number,default:0},driveDate:{type:Date,default:()=>new Date}},{timestamps:!0});s.index({district:1,driveDate:-1}),i.index({district:1,driveDate:-1}),n.index({district:1,driveDate:-1}),u.index({district:1,driveDate:-1}),d.index({district:1,driveDate:-1}),l.index({district:1,driveDate:-1}),o.index({district:1,driveDate:-1}),p.index({district:1,driveDate:-1}),c.index({district:1,driveDate:-1});let m=a.models.NBWDrive||(0,a.model)("NBWDrive",s),f=a.models.FirearmsDrive||(0,a.model)("FirearmsDrive",i),y=a.models.SandMiningDrive||(0,a.model)("SandMiningDrive",n),N=a.models.MissingPersonsDrive||(0,a.model)("MissingPersonsDrive",u),b=a.models.CasePendencyDrive||(0,a.model)("CasePendencyDrive",d),v=a.models.PreventiveMeasuresDrive||(0,a.model)("PreventiveMeasuresDrive",l),g=a.models.ExciseAct||(0,a.model)("ExciseAct",o),D=a.models.OPGAct||(0,a.model)("OPGAct",p),S=a.models.NarcoticsEnforcement||(0,a.model)("NarcoticsEnforcement",c)},13534:(e,t,r)=>{r.d(t,{M:()=>n,m:()=>i});var a=r(16910),s=r(51104);function i(e){let t=e.cookies.get(a.Md)?.value;if(!t)return(0,s.Hs)();try{return(0,a.$v)(t)}catch(e){return console.warn("Auth verification failed",e),(0,s.Hs)()}}function n(e,t){let r=i(e);return"role"in r&&!t.includes(r.role)?(0,s.ID)():r}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[7787,5541,5405,4833],()=>r(38912));module.exports=a})();