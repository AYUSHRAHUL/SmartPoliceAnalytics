"use strict";(()=>{var e={};e.id=8687,e.ids=[8687],e.modules={11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},89618:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>q,patchFetch:()=>v,requestAsyncStorage:()=>y,routeModule:()=>x,serverHooks:()=>g,staticGenerationAsyncStorage:()=>w});var i={};r.r(i),r.d(i,{DELETE:()=>m,PUT:()=>l,runtime:()=>p});var n=r(73278),a=r(45002),o=r(54877),s=r(1035),u=r(21899),c=r(51104),d=r(13534),f=r(70450);let p="nodejs";async function l(e,{params:t}){let r=(0,d.m)(e);if(!("role"in r))return r;if("Officer"===r.role)return(0,c.yw)("Insufficient permissions");try{let i=await e.json(),n=f.L.safeParse(i);if(!n.success)return(0,c.yw)("Invalid officer payload",n.error.flatten());await (0,s.Q)();let a=await u.pB.findByIdAndUpdate(t.id,n.data,{new:!0});if(!a)return(0,c.v6)("Officer not found");return await u.J0.create({action:"UPDATE",entity:"Officer",entityId:a._id.toString(),user:r.username,metadata:n.data}),(0,c.ok)(a)}catch(e){return(0,c.I3)("Failed to update officer",e)}}async function m(e,{params:t}){let r=(0,d.m)(e);if(!("role"in r))return r;if("SuperAdmin"!==r.role)return(0,c.yw)("Only SuperAdmin can delete officers");try{if(await (0,s.Q)(),!await u.pB.findByIdAndDelete(t.id))return(0,c.v6)("Officer not found");return await u.J0.create({action:"DELETE",entity:"Officer",entityId:t.id,user:r.username}),(0,c.ok)({deleted:!0})}catch(e){return(0,c.I3)("Failed to delete officer",e)}}let x=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/officers/[id]/route",pathname:"/api/officers/[id]",filename:"route",bundlePath:"app/api/officers/[id]/route"},resolvedPagePath:"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\api\\officers\\[id]\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:y,staticGenerationAsyncStorage:w,serverHooks:g}=x,q="/api/officers/[id]/route";function v(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:w})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[7787,5541,5405,4833,1974],()=>r(89618));module.exports=i})();