"use strict";(()=>{var e={};e.id=8107,e.ids=[8107],e.modules={11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},46417:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>v,routeModule:()=>m,serverHooks:()=>R,staticGenerationAsyncStorage:()=>g});var r={};n.r(r),n.d(r,{GET:()=>d,POST:()=>x,runtime:()=>f});var o=n(73278),s=n(45002),i=n(54877),a=n(1035),u=n(21899),c=n(51104),l=n(70450),p=n(13534);let f="nodejs";async function d(){try{await (0,a.Q)();let e=await u.pB.find().sort({totalScore:-1}).lean();return(0,c.ok)(e)}catch(e){return(0,c.I3)("Failed to fetch officers",e)}}async function x(e){let t=(0,p.m)(e);if(!("role"in t))return t;if("Officer"===t.role)return(0,c.yw)("Insufficient permissions");try{let t=await e.json(),n=l.R.safeParse(t);if(!n.success)return(0,c.yw)("Invalid officer payload",n.error.flatten());await (0,a.Q)();let r=await u.pB.create(n.data);return(0,c.i2)(r)}catch(e){return(0,c.I3)("Failed to create officer",e)}}let m=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/officers/route",pathname:"/api/officers",filename:"route",bundlePath:"app/api/officers/route"},resolvedPagePath:"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\api\\officers\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:v,staticGenerationAsyncStorage:g,serverHooks:R}=m,y="/api/officers/route";function h(){return(0,i.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:g})}},16910:(e,t,n)=>{n.d(t,{$v:()=>d,I2:()=>x,Md:()=>c,Oe:()=>p,c_:()=>l,w5:()=>m,z:()=>f});var r=n(63506),o=n.n(r),s=n(67390),i=n.n(s),a=n(52845),u=n(56377);let c="police-dashboard-token";function l(e){return o().hash(e,10)}function p(e,t){return o().compare(e,t)}function f(e){let t=u.O.JWT_SECRET,n=u.O.JWT_EXPIRES_IN||"7d";return i().sign(e,t,{expiresIn:n})}function d(e){let t=u.O.JWT_SECRET;return i().verify(e,t)}function x(){(0,a.cookies)().delete(c)}function m(){return a.cookies().get(c)?.value??null}},51104:(e,t,n)=>{n.d(t,{Hs:()=>a,I3:()=>l,ID:()=>u,i2:()=>s,ok:()=>o,v6:()=>c,yw:()=>i});var r=n(71309);function o(e,t){return r.NextResponse.json({success:!0,data:e},{status:200,...t})}function s(e){return r.NextResponse.json({success:!0,data:e},{status:201})}function i(e,t){return r.NextResponse.json({success:!1,message:e,details:t},{status:400})}function a(e="Unauthorized"){return r.NextResponse.json({success:!1,message:e},{status:401})}function u(e="Forbidden"){return r.NextResponse.json({success:!1,message:e},{status:403})}function c(e="Not found"){return r.NextResponse.json({success:!1,message:e},{status:404})}function l(e="Internal server error",t){return console.error(e,t),r.NextResponse.json({success:!1,message:e},{status:500})}},13534:(e,t,n)=>{n.d(t,{M:()=>i,m:()=>s});var r=n(16910),o=n(51104);function s(e){let t=e.cookies.get(r.Md)?.value;if(!t)return(0,o.Hs)();try{return(0,r.$v)(t)}catch(e){return console.warn("Auth verification failed",e),(0,o.Hs)()}}function i(e,t){let n=s(e);return"role"in n&&!t.includes(n.role)?(0,o.ID)():n}},70450:(e,t,n)=>{n.d(t,{L:()=>s,R:()=>o});var r=n(93389);let o=r.Ry({name:r.Z_().min(1),badgeId:r.Z_().min(1),department:r.Z_().min(1),designation:r.Z_().min(1),district:r.Z_().optional(),caseClosed:r.Rx().nonnegative().optional(),cyberResolved:r.Rx().nonnegative().optional(),feedbackScore:r.Rx().min(0).max(5).optional(),awarenessPrograms:r.Rx().nonnegative().optional(),emergencyResponses:r.Rx().nonnegative().optional(),totalScore:r.Rx().nonnegative().optional()}),s=o.partial()}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[7787,5541,5405,4833,540],()=>n(46417));module.exports=r})();