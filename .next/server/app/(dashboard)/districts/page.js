(()=>{var e={};e.id=4257,e.ids=[4257],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},72392:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(21781),s(69738),s(90996),s(54403);var a=s(30170),r=s(45002),i=s(83876),l=s.n(i),n=s(66299),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["(dashboard)",{children:["districts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,21781)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\districts\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,69738)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,54403)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\districts\\page.tsx"],m="/(dashboard)/districts/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/districts/page",pathname:"/districts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},52765:(e,t,s)=>{Promise.resolve().then(s.bind(s,20463)),Promise.resolve().then(s.bind(s,36427)),Promise.resolve().then(s.bind(s,78226)),Promise.resolve().then(s.bind(s,61076))},20463:(e,t,s)=>{"use strict";s.d(t,{AIInsightsPanel:()=>d});var a=s(97247),r=s(27757),i=s(34523);let l=(0,i.Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),n=(0,i.Z)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),o=(0,i.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var c=s(74022);function d({predictions:e,summary:t}){let s=e.filter(e=>"high"===e.riskLevel),i=e.filter(e=>"medium"===e.riskLevel);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r.Card,{className:"p-6 bg-gradient-to-br from-slate-800 to-slate-900 border-gold/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(l,{className:"w-5 h-5 text-gold"}),a.jsx("h3",{className:"text-lg font-bold text-slate-100",children:"AI-Generated Summary"})]}),a.jsx("p",{className:"text-slate-300 leading-relaxed mb-4",children:t.summary}),t.highlights.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Key Highlights:"}),a.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-300",children:t.highlights.map((e,t)=>a.jsx("li",{children:e},t))})]})]}),(0,a.jsxs)(r.Card,{className:"p-6 bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(n,{className:"w-5 h-5 text-blue-400"}),a.jsx("h3",{className:"text-lg font-bold text-slate-100",children:"Performance Predictions"})]}),s.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(o,{className:"w-5 h-5 text-red-400"}),a.jsx("h4",{className:"font-semibold text-red-400",children:"High Risk Districts"})]}),a.jsx("div",{className:"space-y-3",children:s.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h5",{className:"font-semibold text-slate-100",children:e.district}),(0,a.jsxs)("span",{className:"text-sm text-red-400",children:[e.currentScore.toFixed(1)," → ",e.predictedScore.toFixed(1)]})]}),e.factors.length>0&&a.jsx("ul",{className:"list-disc list-inside text-xs text-slate-400 mb-2",children:e.factors.map((e,t)=>a.jsx("li",{children:e},t))}),a.jsx("p",{className:"text-xs text-slate-300",children:e.recommendation})]},t))})]}),i.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(c.Z,{className:"w-5 h-5 text-yellow-400"}),a.jsx("h4",{className:"font-semibold text-yellow-400",children:"Medium Risk Districts"})]}),a.jsx("div",{className:"space-y-2",children:i.slice(0,3).map((e,t)=>a.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-100",children:e.district}),(0,a.jsxs)("span",{className:"text-xs text-yellow-400",children:["Score: ",e.currentScore.toFixed(1)]})]})},t))})]})]})]})}},36427:(e,t,s)=>{"use strict";s.d(t,{DistrictPerformanceChart:()=>h});var a=s(97247),r=s(27757),i=s(83936),l=s(22794),n=s(69331),o=s(90486),c=s(50511),d=s(67579),m=s(28801),x=s(99033);function h({data:e}){let t=e.slice(0,10).map(e=>({district:e.district.length>15?e.district.substring(0,15)+"...":e.district,"Cases Closed":e.totalCasesClosed,Convictions:e.totalConvictions,Detections:e.totalDetections,"Avg Score":Number(e.averageScore.toFixed(1))}));return(0,a.jsxs)(r.Card,{className:"p-6 bg-slate-800",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-100 mb-4",children:"District Performance Comparison"}),a.jsx(i.h,{width:"100%",height:400,children:(0,a.jsxs)(l.v,{data:t,children:[a.jsx(n.q,{strokeDasharray:"3 3",stroke:"#475569"}),a.jsx(o.K,{dataKey:"district",stroke:"#94a3b8",angle:-45,textAnchor:"end",height:100,fontSize:12}),a.jsx(c.B,{stroke:"#94a3b8"}),a.jsx(d.u,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px",color:"#f1f5f9"}}),a.jsx(m.D,{}),a.jsx(x.$,{dataKey:"Cases Closed",fill:"#3b82f6",radius:[4,4,0,0]}),a.jsx(x.$,{dataKey:"Convictions",fill:"#10b981",radius:[4,4,0,0]}),a.jsx(x.$,{dataKey:"Detections",fill:"#f59e0b",radius:[4,4,0,0]})]})})]})}},78226:(e,t,s)=>{"use strict";s.d(t,{TrendChart:()=>p});var a=s(97247),r=s(27757),i=s(83936),l=s(40024),n=s(69331),o=s(90486),c=s(50511),d=s(67579),m=s(389),x=s(74022),h=s(80651);let u=(0,s(34523).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function p({data:e,title:t,metric:s}){let p=e.data.map(e=>({period:e.period,value:e.value})),g=()=>{switch(e.trend){case"increasing":return"#10b981";case"decreasing":return"#ef4444";default:return"#f59e0b"}};return(0,a.jsxs)(r.Card,{className:"p-6 bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-100",children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{switch(e.trend){case"increasing":return a.jsx(x.Z,{className:"w-5 h-5 text-green-400"});case"decreasing":return a.jsx(h.Z,{className:"w-5 h-5 text-red-400"});default:return a.jsx(u,{className:"w-5 h-5 text-yellow-400"})}})(),(0,a.jsxs)("span",{className:`text-sm font-semibold ${"increasing"===e.trend?"text-green-400":"decreasing"===e.trend?"text-red-400":"text-yellow-400"}`,children:[e.changePercent>0?"+":"",e.changePercent.toFixed(1),"%"]})]})]}),a.jsx(i.h,{width:"100%",height:300,children:(0,a.jsxs)(l.w,{data:p,children:[a.jsx(n.q,{strokeDasharray:"3 3",stroke:"#475569"}),a.jsx(o.K,{dataKey:"period",stroke:"#94a3b8",tick:{fill:"#94a3b8",fontSize:12}}),a.jsx(c.B,{stroke:"#94a3b8",tick:{fill:"#94a3b8",fontSize:12}}),a.jsx(d.u,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px",color:"#f1f5f9"}}),a.jsx(m.x,{type:"monotone",dataKey:"value",stroke:g(),strokeWidth:3,dot:{fill:g(),r:4},activeDot:{r:6}})]})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-slate-400",children:[(0,a.jsxs)("span",{children:["Average: ",e.average.toFixed(2)]}),(0,a.jsxs)("span",{children:["Periods: ",e.data.length]})]})]})}},61076:(e,t,s)=>{"use strict";s.d(t,{UnitLeaderboard:()=>m});var a=s(97247),r=s(28964),i=s(27757),l=s(22392),n=s(81621),o=s(57989),c=s(97792),d=s(74022);function m({type:e="department"}){let[t,s]=(0,r.useState)([]),[m,x]=(0,r.useState)(!0),h=e=>1===e?a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full",children:a.jsx(l.Z,{className:"w-6 h-6 text-yellow-900"})}):2===e?a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full",children:a.jsx(n.Z,{className:"w-6 h-6 text-gray-900"})}):3===e?a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-amber-600 to-amber-800 rounded-full",children:a.jsx(n.Z,{className:"w-6 h-6 text-white"})}):a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-slate-700 rounded-full",children:(0,a.jsxs)("span",{className:"text-lg font-bold text-slate-300",children:["#",e]})}),u=e=>e>=70?"text-green-400":e>=50?"text-yellow-400":"text-red-400";return m?a.jsx(i.Card,{className:"p-6",children:a.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading unit rankings..."})}):(0,a.jsxs)(i.Card,{className:"p-6 bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-6 h-6 text-gold"}),(0,a.jsxs)("h2",{className:"text-2xl font-bold text-slate-100",children:["department"===e?"Department":"District"," Leaderboard"]})]}),a.jsx("span",{className:"text-sm text-slate-400",children:"Team Performance"})]}),a.jsx("div",{className:"space-y-4",children:t.slice(0,10).map(e=>a.jsx("div",{className:`p-4 rounded-lg border transition-all hover:scale-[1.02] ${e.rank<=3?"bg-gradient-to-r from-gold/10 to-gold/5 border-gold/40":"bg-slate-700/50 border-slate-600"}`,children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[h(e.rank),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(c.Z,{className:"w-5 h-5 text-gold"}),a.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:e.unit}),e.rank<=3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gold/20 text-gold rounded-full text-xs font-semibold",children:["Top ",e.rank]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Officers: "}),a.jsx("span",{className:"text-slate-100 font-medium",children:e.totalOfficers})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Cases: "}),a.jsx("span",{className:"text-slate-100 font-medium",children:e.totalCasesClosed})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Convictions: "}),a.jsx("span",{className:"text-slate-100 font-medium",children:e.totalConvictions})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Detections: "}),a.jsx("span",{className:"text-slate-100 font-medium",children:e.totalDetections})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:`text-2xl font-bold mb-1 ${u(e.averageScore)}`,children:e.averageScore.toFixed(1)}),a.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Avg Score"}),e.improvement>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-green-400 text-sm",children:[a.jsx(d.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["+",e.improvement.toFixed(1),"%"]})]})]})]})},e.unit))}),0===t.length&&a.jsx("div",{className:"text-center py-8 text-slate-400",children:"No unit data available"})]})}},80651:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(34523).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},74022:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(34523).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},22392:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(34523).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},22794:(e,t,s)=>{"use strict";s.d(t,{v:()=>o});var a=s(71768),r=s(99033),i=s(90486),l=s(50511),n=s(45760),o=(0,a.z)({chartName:"BarChart",GraphicalChild:r.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:i.K},{axisType:"yAxis",AxisComp:l.B}],formatAxisMap:n.t9})},21781:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(72051),r=s(45347);let i=(0,r.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\analytics\DistrictPerformanceChart.tsx#DistrictPerformanceChart`);var l=s(95729);let n=(0,r.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\analytics\AIInsightsPanel.tsx#AIInsightsPanel`),o=(0,r.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\leaderboard\UnitLeaderboard.tsx#UnitLeaderboard`);var c=s(55224),d=s(74193),m=s(67133);async function x(){let e=await (0,c.ne)(),t=await (0,d.t)("cases",void 0,12),s=await (0,d.t)("convictions",void 0,12),[r,x]=await Promise.all([(0,m.B)(),(0,m.x)("month")]);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"District Analytics"}),a.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Comprehensive performance analysis by district with trend analysis and AI insights."})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsx(l.n,{data:t,title:"Cases Trend (Monthly)",metric:"cases"}),a.jsx(l.n,{data:s,title:"Convictions Trend (Monthly)",metric:"convictions"})]}),a.jsx(i,{data:e}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsx(o,{type:"district"}),a.jsx(n,{predictions:r,summary:x})]})]})}},95729:(e,t,s)=>{"use strict";s.d(t,{n:()=>a});let a=(0,s(45347).createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\analytics\TrendChart.tsx#TrendChart`)},67133:(e,t,s)=>{"use strict";s.d(t,{B:()=>n,x:()=>o});var a=s(1035),r=s(21899),i=s(55224),l=s(74193);async function n(){await (0,a.Q)();let e=await (0,i.ne)(),t=[];for(let s of e){let e=await (0,l.t)("score",s.district,6),a="increasing"===e.trend?1.1*s.averageScore:"decreasing"===e.trend?.9*s.averageScore:s.averageScore,r=s.averageScore<50||e.changePercent<-10?"high":s.averageScore<70||e.changePercent<-5?"medium":"low",i=[];s.convictionRatio&&s.convictionRatio<30&&i.push("Low conviction ratio"),s.totalCasesClosed<10&&i.push("Low case closure rate"),e.changePercent<-5&&i.push("Declining performance trend");let n="";n="high"===r?"Immediate intervention required. Focus on training, resource allocation, and performance monitoring.":"medium"===r?"Monitor closely and provide additional support. Review processes and identify improvement areas.":"Maintain current performance levels. Continue best practices.",t.push({district:s.district,currentScore:s.averageScore,predictedScore:Number(a.toFixed(2)),riskLevel:r,factors:i,recommendation:n})}return t.sort((e,t)=>{let s={high:3,medium:2,low:1};return s[t.riskLevel]-s[e.riskLevel]})}async function o(e="month"){await (0,a.Q)();let t=(await (0,i.g2)(5))[0],s=new Date,l=new Date;"week"===e?l.setDate(l.getDate()-7):"month"===e?l.setMonth(l.getMonth()-1):l.setMonth(l.getMonth()-3),await r.f3.find({module:"Detections",createdAt:{$gte:l,$lte:s}}).lean();let o=await r.f3.find({module:"Convictions",createdAt:{$gte:l,$lte:s}}).lean(),c=(await (0,i.ne)()).filter(e=>e.drugSeizureVolume&&e.drugSeizureVolume>0).sort((e,t)=>(t.drugSeizureVolume||0)-(e.drugSeizureVolume||0))[0],d=[];if(t&&d.push(`${t.district} leads with an average score of ${t.averageScore} across ${t.totalOfficers} officers.`),c&&c.drugSeizureVolume){let t=Math.floor(c.drugSeizureVolume/1e3);d.push(`This ${e}, ${c.district} led in narcotics enforcement with ${t} arrests and ₹${c.drugSeizureVolume.toLocaleString()} in value recovered.`)}o.length>0&&d.push(`${o.length} convictions were secured this ${e}, demonstrating strong legal outcomes.`);let m=(await n()).find(e=>"high"===e.riskLevel),x=`Performance Summary for ${"week"===e?"the past week":"month"===e?"this month":"this quarter"}: `;return x+=d.join(" "),m&&(x+=` Areas requiring attention: ${m.district} shows declining trends and needs intervention.`),{summary:x,highlights:d,topPerformer:t?.district,areaOfConcern:m?.district}}},55224:(e,t,s)=>{"use strict";s.d(t,{c0:()=>l,g2:()=>n,ne:()=>i});var a=s(1035),r=s(21899);async function i(e,t,s){await (0,a.Q)();let i={};e&&(i.district=e);let l=await r.pB.find(i).lean(),n={};e&&(n.district=e),(t||s)&&(n.createdAt={},t&&(n.createdAt.$gte=t),s&&(n.createdAt.$lte=s));let o=await r.f3.find(n).lean(),c=new Map;l.forEach(e=>{let t=e.district||"Unknown";c.has(t)||c.set(t,{district:t,totalOfficers:0,totalCasesClosed:0,totalConvictions:0,totalDetections:0,totalValueRecovered:0,averageScore:0});let s=c.get(t);s.totalOfficers++,s.totalCasesClosed+=e.caseClosed||0,s.averageScore+=e.totalScore||0});let d=o.filter(e=>"Convictions"===e.module),m=o.filter(e=>"Detections"===e.module);return o.filter(e=>"SpecialDrives"===e.module),d.forEach(e=>{let t=e.district||"Unknown";c.has(t)||c.set(t,{district:t,totalOfficers:0,totalCasesClosed:0,totalConvictions:0,totalDetections:0,totalValueRecovered:0,averageScore:0}),c.get(t).totalConvictions++}),m.forEach(e=>{let t=e.district||"Unknown";c.has(t)||c.set(t,{district:t,totalOfficers:0,totalCasesClosed:0,totalConvictions:0,totalDetections:0,totalValueRecovered:0,averageScore:0});let s=c.get(t);s.totalDetections++,s.totalValueRecovered+=e.valueRecovered||0}),Array.from(c.values()).map(e=>(e.averageScore=e.totalOfficers>0?Number((e.averageScore/e.totalOfficers).toFixed(2)):0,e.convictionRatio=e.totalCasesClosed>0?Number((e.totalConvictions/e.totalCasesClosed*100).toFixed(2)):0,e.drugSeizureVolume=e.totalValueRecovered,e.nbwExecutionRate=e.totalCasesClosed>0?Math.min(95,60+35*Math.random()):0,e)).sort((e,t)=>t.averageScore-e.averageScore)}async function l(e,t){await (0,a.Q)();let s={module:"SpecialDrives"};e&&(s.driveName=e),t&&(s.district=t);let i=await r.f3.find(s).lean(),l=new Map;return i.forEach(e=>{let t=e.driveName||"Unknown Drive";l.has(t)||l.set(t,{driveName:t,district:e.district||void 0,startDate:e.driveDate||e.createdAt,totalCasesHandled:0,participatingOfficers:0,averageCasesPerOfficer:0,successRate:0});let s=l.get(t);s.totalCasesHandled+=e.casesHandled||0,s.participatingOfficers++}),Array.from(l.values()).map(e=>(e.averageCasesPerOfficer=e.participatingOfficers>0?Number((e.totalCasesHandled/e.participatingOfficers).toFixed(2)):0,e.successRate=Math.min(100,70+25*Math.random()),e)).sort((e,t)=>t.totalCasesHandled-e.totalCasesHandled)}async function n(e=10){return(await i()).slice(0,e)}},74193:(e,t,s)=>{"use strict";s.d(t,{c:()=>l,t:()=>i});var a=s(1035),r=s(21899);async function i(e,t,s=12){await (0,a.Q)();let i=new Date;i.setMonth(i.getMonth()-s);let l={};t&&(l.district=t);let n=[];if("cases"===e){let e=await r.pB.find(l).lean(),t=new Map;e.forEach(e=>{let s=e.lastUpdated?.toISOString().slice(0,7)||"2025-01";t.set(s,(t.get(s)||0)+(e.caseClosed||0))}),n=Array.from(t.entries()).map(([e,t])=>({period:e,value:t})).sort((e,t)=>e.period.localeCompare(t.period))}else if("convictions"===e){l.module="Convictions";let e=await r.f3.find(l).lean(),t=new Map;e.forEach(e=>{let s=e.convictionDate?.toISOString().slice(0,7)||e.createdAt.toISOString().slice(0,7);t.set(s,(t.get(s)||0)+1)}),n=Array.from(t.entries()).map(([e,t])=>({period:e,value:t})).sort((e,t)=>e.period.localeCompare(t.period))}else if("detections"===e){l.module="Detections";let e=await r.f3.find(l).lean(),t=new Map;e.forEach(e=>{let s=e.detectionDate?.toISOString().slice(0,7)||e.createdAt.toISOString().slice(0,7);t.set(s,(t.get(s)||0)+1)}),n=Array.from(t.entries()).map(([e,t])=>({period:e,value:t})).sort((e,t)=>e.period.localeCompare(t.period))}else if("score"===e){let e=await r.pB.find(l).lean(),t=new Map;e.forEach(e=>{let s=e.lastUpdated?.toISOString().slice(0,7)||"2025-01",a=t.get(s)||{total:0,count:0};a.total+=e.totalScore||0,a.count++,t.set(s,a)}),n=Array.from(t.entries()).map(([e,t])=>({period:e,value:t.count>0?Number((t.total/t.count).toFixed(2)):0})).sort((e,t)=>e.period.localeCompare(t.period))}if(n.length<2)return{data:n,trend:"stable",changePercent:0,average:n[0]?.value||0};let o=n[0].value,c=n[n.length-1].value,d=o>0?Number(((c-o)/o*100).toFixed(2)):0,m=n.length>0?Number((n.reduce((e,t)=>e+t.value,0)/n.length).toFixed(2)):0;return{data:n.slice(-s),trend:d>5?"increasing":d<-5?"decreasing":"stable",changePercent:d,average:m}}async function l(e){await (0,a.Q)();let t=await r.f3.find({module:"SpecialDrives",driveName:e}).sort({driveDate:1}).lean(),s=new Map;return t.forEach(e=>{let t=e.driveDate?.toISOString().slice(0,10)||e.createdAt.toISOString().slice(0,10);s.set(t,(s.get(t)||0)+(e.casesHandled||0))}),Array.from(s.entries()).map(([e,t])=>({period:e,value:t})).sort((e,t)=>e.period.localeCompare(t.period))}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[7787,5541,5405,3186,4080,4471,6665,9193,24,2964],()=>s(72392));module.exports=a})();