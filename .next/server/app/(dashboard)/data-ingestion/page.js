(()=>{var e={};e.id=6819,e.ids=[6819],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},13653:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(26169),s(69738),s(90996),s(54403);var a=s(30170),l=s(45002),r=s(83876),i=s.n(r),n=s(66299),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["(dashboard)",{children:["data-ingestion",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,26169)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\data-ingestion\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,69738)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,54403)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\data-ingestion\\page.tsx"],m="/(dashboard)/data-ingestion/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(dashboard)/data-ingestion/page",pathname:"/data-ingestion",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},23990:(e,t,s)=>{Promise.resolve().then(s.bind(s,2700)),Promise.resolve().then(s.bind(s,46243)),Promise.resolve().then(s.bind(s,46041))},91135:(e,t,s)=>{Promise.resolve().then(s.bind(s,90641))},87373:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,63642,23)),Promise.resolve().then(s.t.bind(s,87586,23)),Promise.resolve().then(s.t.bind(s,47838,23)),Promise.resolve().then(s.t.bind(s,58057,23)),Promise.resolve().then(s.t.bind(s,77741,23)),Promise.resolve().then(s.t.bind(s,13118,23))},87527:()=>{},2700:(e,t,s)=>{"use strict";s.d(t,{FileUpload:()=>u});var a=s(97247),l=s(28964);let r=(0,s(34523).Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var i=s(37013),n=s(69964),o=s(20416),d=s(35690),c=s(31568),m=s(70155),x=s(27757);function u(){let[e,t]=(0,l.useState)(null),[s,u]=(0,l.useState)("Excel"),[h,p]=(0,l.useState)("SpecialDrives"),[b,g]=(0,l.useState)(!1),[f,v]=(0,l.useState)(null),[j,N]=(0,l.useState)(null),y=async()=>{if(!e){N("Please select a file");return}g(!0),N(null),v(null);try{let t=new FormData;t.append("file",e),t.append("source",s),t.append("module",h);let a=await fetch("/api/data-ingestion/upload",{method:"POST",body:t}),l=await a.json();if(!a.ok)throw Error(l.message||"Upload failed");v(l.data)}catch(e){N(e instanceof Error?e.message:"Upload failed")}finally{g(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(x.Card,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-100 mb-4",children:"Upload Data File"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Select File (Excel, CSV, or PDF)"}),a.jsx("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("label",{className:"flex-1 cursor-pointer",children:[a.jsx("input",{type:"file",accept:".xlsx,.xls,.csv,.pdf",onChange:e=>{let s=e.target.files?.[0];if(s){t(s),v(null),N(null);let e=s.name.toLowerCase().split(".").pop();"xlsx"===e||"xls"===e?u("Excel"):"csv"===e?u("CSV"):"pdf"===e&&u("PDF")}},className:"hidden",disabled:b}),a.jsx("div",{className:"border-2 border-dashed border-slate-600 rounded-lg p-6 hover:border-gold transition-colors",children:e?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(r,{className:"w-8 h-8 text-gold"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-100 font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-slate-400",children:[(e.size/1024/1024).toFixed(2)," MB"]})]}),!b&&a.jsx("button",{onClick:e=>{e.preventDefault(),t(null)},className:"text-slate-400 hover:text-red-400",children:a.jsx(i.Z,{className:"w-5 h-5"})})]}):(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(n.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-2"}),a.jsx("p",{className:"text-slate-300",children:"Click to select file"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Supports: .xlsx, .xls, .csv, .pdf"})]})})]})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Data Source"}),(0,a.jsxs)("select",{value:s,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:border-gold",disabled:b,children:[a.jsx("option",{value:"Excel",children:"Excel File"}),a.jsx("option",{value:"CSV",children:"CSV File"}),a.jsx("option",{value:"PDF",children:"PDF File"}),a.jsx("option",{value:"CCTNS_SpecialDrives",children:"CCTNS - Special Drives"}),a.jsx("option",{value:"CCTNS_Convictions",children:"CCTNS - Convictions"}),a.jsx("option",{value:"CCTNS_Detections",children:"CCTNS - Detections"}),a.jsx("option",{value:"Manual",children:"Manual Entry"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"CCTNS Module"}),(0,a.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:border-gold",disabled:b,children:[a.jsx("option",{value:"SpecialDrives",children:"Special Drives"}),a.jsx("option",{value:"Convictions",children:"Convictions"}),a.jsx("option",{value:"Detections",children:"Detections"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(m.Button,{onClick:y,disabled:!e||b,className:"flex-1 bg-gold hover:bg-gold/90 text-slate-900 font-semibold",children:b?(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Upload & Process"]})}),e&&!b&&a.jsx(m.Button,{onClick:()=>{t(null),v(null),N(null)},variant:"outline",className:"border-slate-600 text-slate-300",children:"Reset"})]})]})]}),j&&a.jsx(x.Card,{className:"p-4 bg-red-900/20 border-red-500",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-400",children:[a.jsx(d.Z,{className:"w-5 h-5"}),a.jsx("p",{className:"font-medium",children:j})]})}),f&&(0,a.jsxs)(x.Card,{className:"p-6 bg-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[f.success?a.jsx(c.Z,{className:"w-6 h-6 text-green-400"}):a.jsx(d.Z,{className:"w-6 h-6 text-yellow-400"}),a.jsx("h3",{className:"text-lg font-bold text-slate-100",children:f.success?"Upload Successful":"Upload Completed with Errors"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-400",children:"Total Records"}),a.jsx("p",{className:"text-xl font-bold text-slate-100",children:f.totalRecords})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-400",children:"Processed"}),a.jsx("p",{className:"text-xl font-bold text-green-400",children:f.processedRecords})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-400",children:"Failed"}),a.jsx("p",{className:"text-xl font-bold text-red-400",children:f.failedRecords})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-400",children:"Success Rate"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-slate-100",children:[f.totalRecords>0?(f.processedRecords/f.totalRecords*100).toFixed(1):0,"%"]})]})]}),f.errors.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"Errors:"}),(0,a.jsxs)("div",{className:"max-h-48 overflow-y-auto space-y-1",children:[f.errors.slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"text-xs text-red-400 bg-red-900/20 p-2 rounded",children:["Row ",e.row,": ",e.message]},t)),f.errors.length>10&&(0,a.jsxs)("p",{className:"text-xs text-slate-400",children:["... and ",f.errors.length-10," more errors"]})]})]})]})]})}},46243:(e,t,s)=>{"use strict";s.d(t,{ImportHistory:()=>u});var a=s(97247),l=s(28964),r=s(27757),i=s(31568),n=s(34523);let o=(0,n.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var d=s(20416);let c=(0,n.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),m=(0,n.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=s(70155);function u(){let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)(!0),u=e=>{switch(e){case"completed":return a.jsx(i.Z,{className:"w-5 h-5 text-green-400"});case"failed":return a.jsx(o,{className:"w-5 h-5 text-red-400"});case"processing":return a.jsx(d.Z,{className:"w-5 h-5 text-blue-400 animate-spin"});default:return a.jsx(c,{className:"w-5 h-5 text-yellow-400"})}},h=e=>{switch(e){case"completed":return"bg-green-900/20 border-green-500";case"failed":return"bg-red-900/20 border-red-500";case"processing":return"bg-blue-900/20 border-blue-500";default:return"bg-yellow-900/20 border-yellow-500"}};return s?a.jsx(r.Card,{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(d.Z,{className:"w-8 h-8 animate-spin text-gold"})})}):(0,a.jsxs)(r.Card,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-100 mb-4",children:"Import History"}),0===e.length?a.jsx("p",{className:"text-slate-400 text-center py-8",children:"No imports yet"}):a.jsx("div",{className:"space-y-3",children:e.map(e=>a.jsx("div",{className:`p-4 rounded-lg border ${h(e.status)}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[u(e.status),a.jsx("h3",{className:"font-semibold text-slate-100",children:e.filename}),a.jsx("span",{className:"text-xs px-2 py-1 bg-slate-700 rounded text-slate-300",children:e.source})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Total: "}),a.jsx("span",{className:"text-slate-100 font-medium",children:e.totalRecords})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Processed: "}),a.jsx("span",{className:"text-green-400 font-medium",children:e.processedRecords})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Failed: "}),a.jsx("span",{className:"text-red-400 font-medium",children:e.failedRecords})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-slate-400",children:"By: "}),a.jsx("span",{className:"text-slate-100 font-medium",children:e.uploadedBy})]})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:new Date(e.createdAt).toLocaleString()})]}),a.jsx(x.Button,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-gold",onClick:()=>{console.log("View details",e._id)},children:a.jsx(m,{className:"w-4 h-4"})})]})},e._id))})]})}},46041:(e,t,s)=>{"use strict";s.d(t,{ManualEntryForm:()=>d});var a=s(97247),l=s(28964),r=s(27757),i=s(70155),n=s(70170),o=s(7663);function d(){let[e,t]=(0,l.useState)("SpecialDrives"),[s,d]=(0,l.useState)({module:"SpecialDrives",officerBadgeId:"",officerName:"",department:"",district:"",driveName:"",driveDate:"",casesHandled:0}),[c,m]=(0,l.useState)(!1),[x,u]=(0,l.useState)(!1),h=e=>{t(e),d({...s,module:e})},p=async t=>{t.preventDefault(),m(!0),u(!1);try{let t=[],a=[];t.push("badgeId","officerName","department","district"),a.push(s.officerBadgeId,s.officerName,s.department,s.district),"SpecialDrives"===e?(t.push("driveName","driveDate","casesHandled"),a.push(s.driveName||"",s.driveDate||"",String(s.casesHandled||0))):"Convictions"===e?(t.push("caseNumber","convictionDate","crimeType","courtName"),a.push(s.caseNumber||"",s.convictionDate||"",s.crimeType||"",s.courtName||"")):"Detections"===e&&(t.push("detectionDate","crimeCategory","valueRecovered"),a.push(s.detectionDate||"",s.crimeCategory||"",String(s.valueRecovered||0)));let l=t.join(",")+"\n"+a.join(","),r=new FormData,i=new Blob([l],{type:"text/csv"}),n=new File([i],`manual-entry-${Date.now()}.csv`,{type:"text/csv"});r.append("file",n),r.append("source","Manual"),r.append("module",e);let o=await fetch("/api/data-ingestion/upload",{method:"POST",body:r}),c=await o.json();if(!o.ok)throw Error(c.message||"Submission failed");u(!0),d({module:e,officerBadgeId:"",officerName:"",department:"",district:"",driveName:"",driveDate:"",casesHandled:0}),setTimeout(()=>u(!1),3e3)}catch(e){console.error("Submission error:",e),alert(e instanceof Error?e.message:"Failed to submit")}finally{m(!1)}};return(0,a.jsxs)(r.Card,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-100 mb-4",children:"Manual Entry"}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Module Type"}),(0,a.jsxs)("select",{value:e,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:border-gold",disabled:c,children:[a.jsx("option",{value:"SpecialDrives",children:"Special Drives"}),a.jsx("option",{value:"Convictions",children:"Convictions"}),a.jsx("option",{value:"Detections",children:"Detections"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Badge ID ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx(n.I,{value:s.officerBadgeId,onChange:e=>d({...s,officerBadgeId:e.target.value}),required:!0,disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Officer Name"}),a.jsx(n.I,{value:s.officerName,onChange:e=>d({...s,officerName:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Department"}),a.jsx(n.I,{value:s.department,onChange:e=>d({...s,department:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"District"}),a.jsx(n.I,{value:s.district,onChange:e=>d({...s,district:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]})]}),"SpecialDrives"===e&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Drive Name"}),a.jsx(n.I,{value:s.driveName,onChange:e=>d({...s,driveName:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Drive Date"}),a.jsx(n.I,{type:"date",value:s.driveDate,onChange:e=>d({...s,driveDate:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Cases Handled"}),a.jsx(n.I,{type:"number",value:s.casesHandled,onChange:e=>d({...s,casesHandled:parseInt(e.target.value)||0}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]})]}),"Convictions"===e&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Case Number"}),a.jsx(n.I,{value:s.caseNumber,onChange:e=>d({...s,caseNumber:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Conviction Date"}),a.jsx(n.I,{type:"date",value:s.convictionDate,onChange:e=>d({...s,convictionDate:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Crime Type"}),a.jsx(n.I,{value:s.crimeType,onChange:e=>d({...s,crimeType:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Court Name"}),a.jsx(n.I,{value:s.courtName,onChange:e=>d({...s,courtName:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]})]}),"Detections"===e&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Detection Date"}),a.jsx(n.I,{type:"date",value:s.detectionDate,onChange:e=>d({...s,detectionDate:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Crime Category"}),a.jsx(n.I,{value:s.crimeCategory,onChange:e=>d({...s,crimeCategory:e.target.value}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Value Recovered"}),a.jsx(n.I,{type:"number",value:s.valueRecovered,onChange:e=>d({...s,valueRecovered:parseFloat(e.target.value)||0}),disabled:c,className:"bg-slate-800 border-slate-600 text-slate-100"})]})]}),a.jsx("div",{className:"flex gap-3",children:a.jsx(i.Button,{type:"submit",disabled:c||!s.officerBadgeId,className:"flex-1 bg-gold hover:bg-gold/90 text-slate-900 font-semibold",children:c?"Submitting...":(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.Z,{className:"w-4 h-4 mr-2"}),"Submit Entry"]})})}),x&&a.jsx("div",{className:"p-3 bg-green-900/20 border border-green-500 rounded-lg text-green-400",children:"Entry submitted successfully!"})]})]})}},90641:(e,t,s)=>{"use strict";s.d(t,{ProtectedShell:()=>Z});var a=s(97247),l=s(34178),r=s(79906),i=s(1423),n=s(81621),o=s(97792),d=s(9527),c=s(62673),m=s(70712),x=s(82522),u=s(66903),h=s(69964),p=s(57989);let b=[{href:"/dashboard",label:"Overview",icon:i.Z},{href:"/leaderboard",label:"Leaderboard",icon:n.Z},{href:"/analytics",label:"Analytics",icon:o.Z},{href:"/districts",label:"Districts",icon:d.Z},{href:"/drives",label:"Drives",icon:c.Z},{href:"/special-drives",label:"Special Drives",icon:m.Z},{href:"/map",label:"Map View",icon:x.Z},{href:"/recognitions",label:"Recognitions",icon:n.Z},{href:"/reports",label:"Reports",icon:u.Z},{href:"/data-ingestion",label:"Data Ingestion",icon:h.Z},{href:"/admin",label:"Admin",icon:p.Z}];function g(){let e=(0,l.usePathname)();return(0,a.jsxs)("aside",{className:"hidden lg:flex w-64 flex-col border-r border-slate-800 bg-[#101931]",children:[a.jsx("div",{className:"p-6",children:a.jsx("h2",{className:"text-sm uppercase tracking-wide text-slate-400",children:"Navigation"})}),a.jsx("nav",{className:"flex-1 px-2 space-y-1",children:b.map(t=>{let s=t.icon,l=e.startsWith(t.href);return(0,a.jsxs)(r.default,{href:t.href,className:`flex items-center gap-3 rounded-lg px-4 py-3 text-sm transition ${l?"bg-gold/20 text-gold border border-gold/40":"text-slate-300 hover:bg-indigoPolice hover:text-gold"}`,children:[a.jsx(s,{className:"h-4 w-4"}),t.label]},t.href)})}),(0,a.jsxs)("div",{className:"p-4 text-xs text-slate-500 border-t border-slate-800",children:["\xa9 ",new Date().getFullYear()," Team Innosphere. All rights reserved."]})]})}var f=s(12662),v=s(5495),j=s(19400),N=s(83128),y=s(28964);let C=[{href:"/dashboard",label:"Dashboard"},{href:"/leaderboard",label:"Leaderboard"},{href:"/analytics",label:"Analytics"},{href:"/recognitions",label:"Recognitions"},{href:"/reports",label:"Reports"},{href:"/admin",label:"Admin"}];function w({username:e}){let t=(0,l.usePathname)(),s=(0,l.useRouter)(),[i,n]=(0,y.useState)(!0),o=async()=>{await N.Z.post("/api/auth/logout"),s.push("/login")};return(0,a.jsxs)("header",{className:"flex items-center justify-between border-b border-slate-800 bg-indigoPolice-dark px-6 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[a.jsx(r.default,{href:"/dashboard",className:"text-lg font-semibold text-gold",children:"Smart Police Analytics"}),a.jsx("nav",{className:"hidden md:flex items-center gap-4 text-sm text-slate-300",children:C.map(e=>a.jsx(r.default,{href:e.href,className:`hover:text-gold transition ${t.startsWith(e.href)?"text-gold font-semibold":""}`,children:e.label},e.href))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx("button",{onClick:()=>n(e=>!e),className:"rounded-lg border border-slate-700 p-2 text-slate-300 hover:border-gold/60 hover:text-gold transition",children:i?a.jsx(f.Z,{className:"h-4 w-4"}):a.jsx(v.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"hidden md:flex flex-col text-right text-xs text-slate-400",children:[a.jsx("span",{className:"text-slate-200 font-semibold",children:e??"User"}),a.jsx("span",{children:"Team Innosphere"})]}),(0,a.jsxs)("button",{onClick:o,className:"inline-flex items-center gap-2 rounded-lg bg-gold px-3 py-2 text-xs font-semibold text-black hover:bg-gold/90 transition",children:[a.jsx(j.Z,{className:"h-4 w-4"}),"Logout"]})]})]})}var S=s(37013),D=s(6683);let P=[{href:"/dashboard",label:"Overview",icon:i.Z},{href:"/leaderboard",label:"Leaderboard",icon:n.Z},{href:"/analytics",label:"Analytics",icon:o.Z},{href:"/districts",label:"Districts",icon:d.Z},{href:"/drives",label:"Drives",icon:c.Z},{href:"/map",label:"Map",icon:x.Z},{href:"/recognitions",label:"Recognitions",icon:n.Z},{href:"/reports",label:"Reports",icon:u.Z},{href:"/data-ingestion",label:"Upload",icon:h.Z},{href:"/admin",label:"Admin",icon:p.Z}];function k(){let[e,t]=(0,y.useState)(!1),s=(0,l.usePathname)();return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"lg:hidden fixed bottom-4 right-4 z-50",children:a.jsx("button",{onClick:()=>t(!e),className:"w-14 h-14 bg-gold rounded-full shadow-lg flex items-center justify-center text-slate-900 hover:bg-gold/90 transition-colors",children:e?a.jsx(S.Z,{className:"w-6 h-6"}):a.jsx(D.Z,{className:"w-6 h-6"})})}),e&&a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>t(!1),children:(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-700 rounded-t-2xl p-4 max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg font-bold text-slate-100 mb-2",children:"Navigation"})}),a.jsx("nav",{className:"space-y-2",children:P.map(e=>{let l=e.icon,i=s.startsWith(e.href);return(0,a.jsxs)(r.default,{href:e.href,onClick:()=>t(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition ${i?"bg-gold/20 text-gold border border-gold/40":"text-slate-300 hover:bg-slate-800"}`,children:[a.jsx(l,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e.label})]},e.href)})})]})})]})}function Z({children:e,username:t}){let s=(0,l.usePathname)().startsWith("/admin");return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0b1220] text-slate-100",children:[a.jsx(w,{username:t}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx(g,{}),(0,a.jsxs)("main",{className:"flex-1 min-h-[calc(100vh-64px)] bg-[#0b1220]",children:[(0,a.jsxs)("div",{className:"space-y-2 border-b border-slate-800 bg-[#101931] px-6 py-4 text-sm text-slate-400",children:[a.jsx("div",{className:"rounded-lg border border-gold/40 bg-gold/10 px-4 py-2 text-xs text-gold",children:"Demo mode enabled. All analytics and leaderboard data use simulated officer records."}),s?"Admin Control Center â€¢ Manage officers, weights, and recognition rules":"Welcome to the Smart Police Analytics dashboard"]}),a.jsx("div",{className:"px-6 py-6",children:e})]})]}),a.jsx(k,{})]})}},70155:(e,t,s)=>{"use strict";s.d(t,{Button:()=>h});var a=s(97247),l=s(28964),r=s.t(l,2);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var n=Symbol.for("react.lazy"),o=r[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===n&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=function(e){let t=function(e){let t=l.forwardRef((e,t)=>{let{children:s,...a}=e;if(d(s)&&"function"==typeof o&&(s=o(s._payload)),l.isValidElement(s)){var r;let e,n;let o=(r=s,(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref),d=function(e,t){let s={...t};for(let a in t){let l=e[a],r=t[a];/^on[A-Z]/.test(a)?l&&r?s[a]=(...e)=>{let t=r(...e);return l(...e),t}:l&&(s[a]=l):"style"===a?s[a]={...l,...r}:"className"===a&&(s[a]=[l,r].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==l.Fragment&&(d.ref=t?function(...e){return t=>{let s=!1,a=e.map(e=>{let a=i(e,t);return s||"function"!=typeof a||(s=!0),a});if(s)return()=>{for(let t=0;t<a.length;t++){let s=a[t];"function"==typeof s?s():i(e[t],null)}}}}(t,o):o),l.cloneElement(s,d)}return l.Children.count(s)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=l.forwardRef((e,s)=>{let{children:r,...i}=e;d(r)&&"function"==typeof o&&(r=o(r._payload));let n=l.Children.toArray(r),c=n.find(x);if(c){let e=c.props.children,r=n.map(t=>t!==c?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...i,ref:s,children:l.isValidElement(e)?l.cloneElement(e,void 0,r):null})}return(0,a.jsx)(t,{...i,ref:s,children:r})});return s.displayName=`${e}.Slot`,s}("Slot"),m=Symbol("radix.slottable");function x(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}var u=s(61929);let h=(0,l.forwardRef)(function({className:e,variant:t="primary",asChild:s=!1,...l},r){let i="sm"===l.size?"px-3 py-1 text-sm":"lg"===l.size?"px-6 py-3 text-base":"px-4 py-2 text-sm";return a.jsx(s?c:"button",{ref:r,className:(0,u.Z)("inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]",i,{default:"",primary:"bg-gold text-black hover:bg-gold/90 focus:ring-gold/50",secondary:"border border-gold/50 text-gold hover:bg-gold/10 focus:ring-gold/30",ghost:"text-slate-300 hover:text-gold hover:bg-indigoPolice",outline:"border border-gold/40 text-gold hover:bg-gold/10 focus:ring-gold/30"}[t],e),...l})})},27757:(e,t,s)=>{"use strict";s.d(t,{Card:()=>r});var a=s(97247),l=s(61929);function r({className:e,children:t}){return a.jsx("div",{className:(0,l.Z)("rounded-2xl border border-slate-800 bg-[#111b33] shadow-lg shadow-black/10",e),children:t})}},70170:(e,t,s)=>{"use strict";s.d(t,{I:()=>i});var a=s(97247),l=s(28964),r=s(61929);let i=(0,l.forwardRef)(function({className:e,...t},s){return a.jsx("input",{ref:s,className:(0,r.Z)("w-full rounded-lg border border-slate-700 bg-[#101931] px-4 py-3 text-sm text-slate-100 placeholder:text-slate-500 focus:border-gold focus:outline-none focus:ring-2 focus:ring-gold/40 transition",e),...t})})},35690:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(34523).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},31568:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(34523).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},20416:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(34523).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7663:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(34523).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},26169:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(72051),l=s(45347);let r=(0,l.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\data-ingestion\FileUpload.tsx#FileUpload`),i=(0,l.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\data-ingestion\ImportHistory.tsx#ImportHistory`),n=(0,l.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\data-ingestion\ManualEntryForm.tsx#ManualEntryForm`);function o(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"Data Ingestion"}),a.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Upload and process data from CCTNS modules, Excel, CSV, or PDF files. The system will automatically clean, validate, and update officer performance metrics. You can also enter data manually using the form below."})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsx(r,{}),a.jsx(n,{})]}),a.jsx(i,{})]})}},69738:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(72051),l=s(41288);let r=(0,s(45347).createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\layout\ProtectedShell.tsx#ProtectedShell`);var i=s(51639);async function n({children:e}){let t=await (0,i.t)();return t||(0,l.redirect)("/login"),a.jsx(r,{username:t.username,children:e})}},54403:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,dynamic:()=>i,metadata:()=>n});var a=s(72051),l=s(45662),r=s.n(l);s(67272);let i="force-dynamic",n={title:"Smart Police Analytics",description:"AI-powered analytics dashboard for police good work recognition."};function o({children:e}){return a.jsx("html",{lang:"en",className:"bg-[#0b1220]",children:a.jsx("body",{className:`${r().variable} antialiased bg-[#0b1220] text-slate-100`,children:e})})}},16910:(e,t,s)=>{"use strict";s.d(t,{$v:()=>u,I2:()=>h,Md:()=>d,Oe:()=>m,c_:()=>c,w5:()=>p,z:()=>x});var a=s(63506),l=s.n(a),r=s(67390),i=s.n(r),n=s(52845),o=s(56377);let d="police-dashboard-token";function c(e){return l().hash(e,10)}function m(e,t){return l().compare(e,t)}function x(e){let t=o.O.JWT_SECRET,s=o.O.JWT_EXPIRES_IN||"7d";return i().sign(e,t,{expiresIn:s})}function u(e){let t=o.O.JWT_SECRET;return i().verify(e,t)}function h(){(0,n.cookies)().delete(d)}function p(){return n.cookies().get(d)?.value??null}},51639:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var a=s(26269),l=s(1035),r=s(21899),i=s(16910);let n=(0,a.cache)(async()=>{let e=(0,i.w5)();if(!e)return null;try{let t=(0,i.$v)(e);await (0,l.Q)();let s=await r.GX.findById(t.sub).select("-password").lean();if(!s)return null;return{id:s._id.toString(),username:s.username,role:t.role}}catch(e){return console.warn("Failed to get current user",e),null}})},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[7787,5541,5405,3186,4080,4471,6665,540],()=>s(13653));module.exports=a})();