(()=>{var e={};e.id=9302,e.ids=[9302,6444],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},82889:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>d}),r(62507),r(69738),r(90996),r(54403);var a=r(30170),s=r(45002),n=r(83876),i=r.n(n),o=r(66299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["(dashboard)",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,62507)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\analytics\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,69738)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,54403)),"C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\rahul\\Downloads\\problem -3, team -9\\SmartPoliceAnalytics-main\\SmartPoliceAnalytics-main\\app\\(dashboard)\\analytics\\page.tsx"],h="/(dashboard)/analytics/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/analytics/page",pathname:"/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},14733:(e,t,r)=>{Promise.resolve().then(r.bind(r,63846)),Promise.resolve().then(r.bind(r,91289)),Promise.resolve().then(r.bind(r,4959))},91135:(e,t,r)=>{Promise.resolve().then(r.bind(r,90641))},87373:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,63642,23)),Promise.resolve().then(r.t.bind(r,87586,23)),Promise.resolve().then(r.t.bind(r,47838,23)),Promise.resolve().then(r.t.bind(r,58057,23)),Promise.resolve().then(r.t.bind(r,77741,23)),Promise.resolve().then(r.t.bind(r,13118,23))},87527:()=>{},63846:(e,t,r)=>{"use strict";r.d(t,{BarContribution:()=>m});var a=r(97247),s=r(83936),n=r(22794),i=r(69331),o=r(90486),l=r(50511),d=r(67579),c=r(99033),h=r(27757);function m({data:e}){return(0,a.jsxs)(h.Card,{className:"p-6",children:[a.jsx("h3",{className:"mb-4 text-lg font-semibold text-slate-100",children:"Department Contribution"}),a.jsx("div",{className:"h-72",children:a.jsx(s.h,{width:"100%",height:"100%",children:(0,a.jsxs)(n.v,{data:e,children:[a.jsx(i.q,{strokeDasharray:"4 4",stroke:"#1f2937"}),a.jsx(o.K,{dataKey:"department",stroke:"#94a3b8"}),a.jsx(l.B,{stroke:"#94a3b8"}),a.jsx(d.u,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:12}}),a.jsx(c.$,{dataKey:"total",fill:"#F5C542",radius:[10,10,0,0]})]})})})]})}},91289:(e,t,r)=>{"use strict";r.d(t,{LineTrend:()=>m});var a=r(97247),s=r(83936),n=r(40024),i=r(69331),o=r(90486),l=r(50511),d=r(67579),c=r(389),h=r(27757);function m({data:e}){return(0,a.jsxs)(h.Card,{className:"p-6",children:[a.jsx("h3",{className:"mb-4 text-lg font-semibold text-slate-100",children:"Average Performance Trend"}),a.jsx("div",{className:"h-72",children:a.jsx(s.h,{width:"100%",height:"100%",children:(0,a.jsxs)(n.w,{data:e,children:[a.jsx(i.q,{strokeDasharray:"4 4",stroke:"#1f2937"}),a.jsx(o.K,{dataKey:"month",stroke:"#94a3b8"}),a.jsx(l.B,{stroke:"#94a3b8"}),a.jsx(d.u,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:12}}),a.jsx(c.x,{type:"monotone",dataKey:"average",stroke:"#F5C542",strokeWidth:3,dot:{r:4}})]})})})]})}},4959:(e,t,r)=>{"use strict";r.d(t,{PieRecognition:()=>m});var a=r(97247),s=r(83936),n=r(28116),i=r(11746),o=r(14779),l=r(67579),d=r(28801),c=r(27757);let h=["#FBBF24","#93C5FD","#F97316"];function m({data:e}){return(0,a.jsxs)(c.Card,{className:"p-6",children:[a.jsx("h3",{className:"mb-4 text-lg font-semibold text-slate-100",children:"Recognition Badge Distribution"}),a.jsx("div",{className:"h-72",children:a.jsx(s.h,{width:"100%",height:"100%",children:(0,a.jsxs)(n.u,{children:[a.jsx(i.b,{data:e,dataKey:"count",nameKey:"badge",outerRadius:110,label:({badge:e,percent:t})=>`${e}: ${(100*t).toFixed(0)}%`,children:e.map((e,t)=>a.jsx(o.b,{fill:h[t%h.length]},t))}),a.jsx(l.u,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:12}}),a.jsx(d.D,{})]})})})]})}},90641:(e,t,r)=>{"use strict";r.d(t,{ProtectedShell:()=>D});var a=r(97247),s=r(34178),n=r(79906),i=r(1423),o=r(81621),l=r(97792),d=r(9527),c=r(62673),h=r(70712),m=r(82522),u=r(66903),x=r(69964),b=r(57989);let p=[{href:"/dashboard",label:"Overview",icon:i.Z},{href:"/leaderboard",label:"Leaderboard",icon:o.Z},{href:"/analytics",label:"Analytics",icon:l.Z},{href:"/districts",label:"Districts",icon:d.Z},{href:"/drives",label:"Drives",icon:c.Z},{href:"/special-drives",label:"Special Drives",icon:h.Z},{href:"/map",label:"Map View",icon:m.Z},{href:"/recognitions",label:"Recognitions",icon:o.Z},{href:"/reports",label:"Reports",icon:u.Z},{href:"/data-ingestion",label:"Data Ingestion",icon:x.Z},{href:"/admin",label:"Admin",icon:b.Z}];function g(){let e=(0,s.usePathname)();return(0,a.jsxs)("aside",{className:"hidden lg:flex w-64 flex-col border-r border-slate-800 bg-[#101931]",children:[a.jsx("div",{className:"p-6",children:a.jsx("h2",{className:"text-sm uppercase tracking-wide text-slate-400",children:"Navigation"})}),a.jsx("nav",{className:"flex-1 px-2 space-y-1",children:p.map(t=>{let r=t.icon,s=e.startsWith(t.href);return(0,a.jsxs)(n.default,{href:t.href,className:`flex items-center gap-3 rounded-lg px-4 py-3 text-sm transition ${s?"bg-gold/20 text-gold border border-gold/40":"text-slate-300 hover:bg-indigoPolice hover:text-gold"}`,children:[a.jsx(r,{className:"h-4 w-4"}),t.label]},t.href)})}),(0,a.jsxs)("div",{className:"p-4 text-xs text-slate-500 border-t border-slate-800",children:["\xa9 ",new Date().getFullYear()," Team Innosphere. All rights reserved."]})]})}var f=r(12662),v=r(5495),j=r(19400),y=r(83128),P=r(28964);let N=[{href:"/dashboard",label:"Dashboard"},{href:"/leaderboard",label:"Leaderboard"},{href:"/analytics",label:"Analytics"},{href:"/recognitions",label:"Recognitions"},{href:"/reports",label:"Reports"},{href:"/admin",label:"Admin"}];function w({username:e}){let t=(0,s.usePathname)(),r=(0,s.useRouter)(),[i,o]=(0,P.useState)(!0),l=async()=>{await y.Z.post("/api/auth/logout"),r.push("/login")};return(0,a.jsxs)("header",{className:"flex items-center justify-between border-b border-slate-800 bg-indigoPolice-dark px-6 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[a.jsx(n.default,{href:"/dashboard",className:"text-lg font-semibold text-gold",children:"Smart Police Analytics"}),a.jsx("nav",{className:"hidden md:flex items-center gap-4 text-sm text-slate-300",children:N.map(e=>a.jsx(n.default,{href:e.href,className:`hover:text-gold transition ${t.startsWith(e.href)?"text-gold font-semibold":""}`,children:e.label},e.href))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx("button",{onClick:()=>o(e=>!e),className:"rounded-lg border border-slate-700 p-2 text-slate-300 hover:border-gold/60 hover:text-gold transition",children:i?a.jsx(f.Z,{className:"h-4 w-4"}):a.jsx(v.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"hidden md:flex flex-col text-right text-xs text-slate-400",children:[a.jsx("span",{className:"text-slate-200 font-semibold",children:e??"User"}),a.jsx("span",{children:"Team Innosphere"})]}),(0,a.jsxs)("button",{onClick:l,className:"inline-flex items-center gap-2 rounded-lg bg-gold px-3 py-2 text-xs font-semibold text-black hover:bg-gold/90 transition",children:[a.jsx(j.Z,{className:"h-4 w-4"}),"Logout"]})]})]})}var S=r(37013),C=r(6683);let A=[{href:"/dashboard",label:"Overview",icon:i.Z},{href:"/leaderboard",label:"Leaderboard",icon:o.Z},{href:"/analytics",label:"Analytics",icon:l.Z},{href:"/districts",label:"Districts",icon:d.Z},{href:"/drives",label:"Drives",icon:c.Z},{href:"/map",label:"Map",icon:m.Z},{href:"/recognitions",label:"Recognitions",icon:o.Z},{href:"/reports",label:"Reports",icon:u.Z},{href:"/data-ingestion",label:"Upload",icon:x.Z},{href:"/admin",label:"Admin",icon:b.Z}];function k(){let[e,t]=(0,P.useState)(!1),r=(0,s.usePathname)();return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"lg:hidden fixed bottom-4 right-4 z-50",children:a.jsx("button",{onClick:()=>t(!e),className:"w-14 h-14 bg-gold rounded-full shadow-lg flex items-center justify-center text-slate-900 hover:bg-gold/90 transition-colors",children:e?a.jsx(S.Z,{className:"w-6 h-6"}):a.jsx(C.Z,{className:"w-6 h-6"})})}),e&&a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>t(!1),children:(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-700 rounded-t-2xl p-4 max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg font-bold text-slate-100 mb-2",children:"Navigation"})}),a.jsx("nav",{className:"space-y-2",children:A.map(e=>{let s=e.icon,i=r.startsWith(e.href);return(0,a.jsxs)(n.default,{href:e.href,onClick:()=>t(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition ${i?"bg-gold/20 text-gold border border-gold/40":"text-slate-300 hover:bg-slate-800"}`,children:[a.jsx(s,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e.label})]},e.href)})})]})})]})}function D({children:e,username:t}){let r=(0,s.usePathname)().startsWith("/admin");return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0b1220] text-slate-100",children:[a.jsx(w,{username:t}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx(g,{}),(0,a.jsxs)("main",{className:"flex-1 min-h-[calc(100vh-64px)] bg-[#0b1220]",children:[(0,a.jsxs)("div",{className:"space-y-2 border-b border-slate-800 bg-[#101931] px-6 py-4 text-sm text-slate-400",children:[a.jsx("div",{className:"rounded-lg border border-gold/40 bg-gold/10 px-4 py-2 text-xs text-gold",children:"Demo mode enabled. All analytics and leaderboard data use simulated officer records."}),r?"Admin Control Center â€¢ Manage officers, weights, and recognition rules":"Welcome to the Smart Police Analytics dashboard"]}),a.jsx("div",{className:"px-6 py-6",children:e})]})]}),a.jsx(k,{})]})}},27757:(e,t,r)=>{"use strict";r.d(t,{Card:()=>n});var a=r(97247),s=r(61929);function n({className:e,children:t}){return a.jsx("div",{className:(0,s.Z)("rounded-2xl border border-slate-800 bg-[#111b33] shadow-lg shadow-black/10",e),children:t})}},62507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(72051),s=r(1035),n=r(21899),i=r(56444);async function o(){await (0,s.Q)();let e=await n.pB.find().lean(),t=e.length?e:(0,i.getDemoOfficers)(30);return{trendData:Object.entries(t.map(e=>({month:e.lastUpdated?.toISOString().slice(0,7)??"2025-01",score:e.totalScore})).reduce((e,t)=>(e[t.month]||(e[t.month]={total:0,count:0}),e[t.month].total+=t.score,e[t.month].count+=1,e),{})).map(([e,t])=>({month:e,average:Number((t.total/t.count).toFixed(2))})).sort((e,t)=>e.month.localeCompare(t.month)).slice(-6),departmentData:Object.entries(t.reduce((e,t)=>(e[t.department]=(e[t.department]??0)+t.totalScore,e),{})).map(([e,t])=>({department:e,total:Number(t.toFixed(2))})).sort((e,t)=>t.total-e.total),recognitionData:e.length?(await n.rB.aggregate([{$group:{_id:"$badge",count:{$sum:1}}}])).map(e=>({badge:e._id,count:e.count})):[{badge:"Gold",count:6},{badge:"Silver",count:9},{badge:"Bronze",count:12}]}}var l=r(45347);let d=(0,l.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\charts\LineTrend.tsx#LineTrend`),c=(0,l.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\charts\BarContribution.tsx#BarContribution`),h=(0,l.createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\charts\PieRecognition.tsx#PieRecognition`);async function m(){let{trendData:e,departmentData:t,recognitionData:r}=await o();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"Analytics & Insights"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Monitor officer performance trends, department contributions, and recognition distribution to make data-driven decisions."})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsx(d,{data:e}),a.jsx(c,{data:t})]}),a.jsx(h,{data:r})]})}},69738:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(72051),s=r(41288);let n=(0,r(45347).createProxy)(String.raw`C:\Users\rahul\Downloads\problem -3, team -9\SmartPoliceAnalytics-main\SmartPoliceAnalytics-main\components\layout\ProtectedShell.tsx#ProtectedShell`);var i=r(51639);async function o({children:e}){let t=await (0,i.t)();return t||(0,s.redirect)("/login"),a.jsx(n,{username:t.username,children:e})}},54403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,dynamic:()=>i,metadata:()=>o});var a=r(72051),s=r(45662),n=r.n(s);r(67272);let i="force-dynamic",o={title:"Smart Police Analytics",description:"AI-powered analytics dashboard for police good work recognition."};function l({children:e}){return a.jsx("html",{lang:"en",className:"bg-[#0b1220]",children:a.jsx("body",{className:`${n().variable} antialiased bg-[#0b1220] text-slate-100`,children:e})})}},16910:(e,t,r)=>{"use strict";r.d(t,{$v:()=>u,I2:()=>x,Md:()=>d,Oe:()=>h,c_:()=>c,w5:()=>b,z:()=>m});var a=r(63506),s=r.n(a),n=r(67390),i=r.n(n),o=r(52845),l=r(56377);let d="police-dashboard-token";function c(e){return s().hash(e,10)}function h(e,t){return s().compare(e,t)}function m(e){let t=l.O.JWT_SECRET,r=l.O.JWT_EXPIRES_IN||"7d";return i().sign(e,t,{expiresIn:r})}function u(e){let t=l.O.JWT_SECRET;return i().verify(e,t)}function x(){(0,o.cookies)().delete(d)}function b(){return o.cookies().get(d)?.value??null}},56444:(e,t,r)=>{"use strict";r.d(t,{getDemoOfficers:()=>n});let a=["Cyber Cell","Crime Branch","Traffic","Women & Child","Special Task Force"],s=["Inspector","Sub-Inspector","ASI","DSP","Head Constable"];function n(e=20){return Array.from({length:e}).map((e,t)=>{let r=Math.floor(120*Math.random()),n=Math.floor(80*Math.random()),i=Number((3+2*Math.random()).toFixed(1)),o=Math.floor(15*Math.random());return{name:`Officer ${String.fromCharCode(65+t%26)}${t}`,badgeId:`BDG${1e3+t}`,department:a[t%a.length],designation:s[t%s.length],caseClosed:r,cyberResolved:n,feedbackScore:i,awarenessPrograms:o,emergencyResponses:Math.floor(200*Math.random()),totalScore:Number((.4*r+.3*n+.2*i*10+.1*o).toFixed(2))}})}},51639:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var a=r(26269),s=r(1035),n=r(21899),i=r(16910);let o=(0,a.cache)(async()=>{let e=(0,i.w5)();if(!e)return null;try{let t=(0,i.$v)(e);await (0,s.Q)();let r=await n.GX.findById(t.sub).select("-password").lean();if(!r)return null;return{id:r._id.toString(),username:r.username,role:t.role}}catch(e){return console.warn("Failed to get current user",e),null}})},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[7787,5541,5405,3186,4080,4471,6665,9193,24,9102,540],()=>r(82889));module.exports=a})();